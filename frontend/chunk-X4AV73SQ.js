import{a as fe}from"./chunk-VRSZYDK5.js";import{a as re,b as ae,c as le,f as se,h as ce,i as de,j as pe,k as me,m as ge}from"./chunk-VY3SDQUV.js";import{a as ue}from"./chunk-MC2LBVTO.js";import{a as _e}from"./chunk-PQGQFAOY.js";import{$ as A,Aa as ne,C as s,Ca as ie,G as Y,Ga as oe,K as f,O as d,P as t,Q as n,R as _,V as C,W as x,X as p,Y as U,_ as S,a as w,aa as r,b as I,ba as u,c as W,ca as O,ea as K,fa as v,ga as h,ha as b,ka as T,la as D,ma as J,na as Z,q as F,r as m,ra as Q,s as g,sa as X,ta as $,ua as ee,va as te,w as y,x as j}from"./chunk-N4G74LMA.js";function ve(l,i){if(l&1){let e=C();t(0,"div",42),_(1,"i",43),t(2,"span"),r(3),n(),t(4,"button",44),x("click",function(){m(e);let o=p();return g(o.errorMessage.set(null))}),r(5,"\xD7"),n()()}if(l&2){let e=p();s(3),u(e.errorMessage())}}function he(l,i){if(l&1){let e=C();t(0,"div",45),_(1,"i",46),t(2,"span"),r(3),n(),t(4,"button",44),x("click",function(){m(e);let o=p();return g(o.successMessage.set(null))}),r(5,"\xD7"),n()()}if(l&2){let e=p();s(3),u(e.successMessage())}}function be(l,i){if(l&1){let e=C();t(0,"button",21),x("click",function(){m(e);let o=p();return g(o.basicInfoTab="stats")}),_(1,"i",47),r(2," Estad\xEDsticas en Tiempo Real "),n()}if(l&2){let e=p();S("active",e.basicInfoTab==="stats")}}function Me(l,i){if(l&1&&(t(0,"span",58),r(1),n()),l&2){let e=p(2);s(),u(e.validationErrors().name)}}function Se(l,i){if(l&1&&(t(0,"span",58),r(1),n()),l&2){let e=p(2);s(),u(e.validationErrors().input_url)}}function ye(l,i){if(l&1){let e=C();t(0,"div",48)(1,"div",49)(2,"label"),r(3,"Nombre *"),n(),t(4,"input",50),b("ngModelChange",function(o){m(e);let c=p();return h(c.model.name,o)||(c.model.name=o),g(o)}),x("ngModelChange",function(o){m(e);let c=p();return g(c.onNameChange(o))}),n(),f(5,Me,2,1,"span",51),n(),t(6,"div",52)(7,"label"),r(8,"URL de Entrada / Stream *"),n(),t(9,"input",53),b("ngModelChange",function(o){m(e);let c=p();return h(c.model.input_url,o)||(c.model.input_url=o),g(o)}),n(),f(10,Se,2,1,"span",51),n(),t(11,"div",54)(12,"label",55)(13,"input",56),b("ngModelChange",function(o){m(e);let c=p();return h(c.model.auto_restart,o)||(c.model.auto_restart=o),g(o)}),n(),_(14,"span",57),r(15," Canal activo (reinicio autom\xE1tico) "),n()()()}if(l&2){let e=p();s(),S("has-error",e.validationErrors().name),s(3),v("ngModel",e.model.name),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().name),s(),S("has-error",e.validationErrors().input_url),s(3),v("ngModel",e.model.input_url),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().input_url),s(3),v("ngModel",e.model.auto_restart),d("disabled",e.currentStatus()==="running")}}function Oe(l,i){if(l&1&&(t(0,"div",62)(1,"h4",63),_(2,"i",64),r(3," Estad\xEDsticas de FFmpeg "),n(),t(4,"div",65)(5,"div",66)(6,"span",67),r(7,"Frame"),n(),t(8,"span",68),r(9),n()(),t(10,"div",66)(11,"span",67),r(12,"FPS"),n(),t(13,"span",68),r(14),T(15,"number"),n()(),t(16,"div",66)(17,"span",67),r(18,"Tiempo"),n(),t(19,"span",68),r(20),n()(),t(21,"div",66)(22,"span",67),r(23,"Bitrate Total"),n(),t(24,"span",68),r(25),n()(),t(26,"div",66)(27,"span",67),r(28,"Velocidad"),n(),t(29,"span",68),r(30),T(31,"number"),n()(),t(32,"div",69)(33,"span",67),r(34,"\xDAltima Actualizaci\xF3n"),n(),t(35,"span",68),r(36),T(37,"date"),n()()()()),l&2){let e=p().ngIf;s(9),u(e.process.ffmpegStats.frame||"---"),s(5),u(e.process.ffmpegStats.fps?D(15,6,e.process.ffmpegStats.fps,"1.2-2"):"---"),s(6),u(e.process.ffmpegStats.timeFormatted||"---"),s(5),u(e.process.ffmpegStats.bitrateFormatted||"---"),s(5),u(e.process.ffmpegStats.speed?D(31,9,e.process.ffmpegStats.speed,"1.2-2")+"x":"---"),s(6),u(e.process.ffmpegStats.timestamp?D(37,12,e.process.ffmpegStats.timestamp,"short"):"---")}}function Pe(l,i){if(l&1&&(t(0,"div",62)(1,"h4",63),_(2,"i",70),r(3," Informaci\xF3n del Sistema "),n(),t(4,"div",65)(5,"div",66)(6,"span",67),r(7,"PID"),n(),t(8,"span",68),r(9),n()(),t(10,"div",66)(11,"span",67),r(12,"Tiempo Transcurrido"),n(),t(13,"span",68),r(14),n()(),t(15,"div",66)(16,"span",67),r(17,"CPU"),n(),t(18,"span",71),r(19),T(20,"number"),n()(),t(21,"div",66)(22,"span",67),r(23,"Memoria"),n(),t(24,"span",72),r(25),T(26,"number"),n()(),t(27,"div",69)(28,"span",67),r(29,"Comando"),n(),t(30,"code",73),r(31),n()()()()),l&2){let e=p().ngIf;s(9),u(e.process.systemInfo.pid||"---"),s(5),u(e.process.systemInfo.elapsedTime||"---"),s(5),u(e.process.systemInfo.cpuPercent?D(20,5,e.process.systemInfo.cpuPercent,"1.1-1")+"%":"---"),s(6),u(e.process.systemInfo.memoryPercent?D(26,8,e.process.systemInfo.memoryPercent,"1.1-1")+"%":"---"),s(6),u(e.process.systemInfo.command||"---")}}function we(l,i){if(l&1&&(t(0,"div",62)(1,"h4",63),_(2,"i",74),r(3," Red "),n(),t(4,"div",65)(5,"div",66)(6,"span",67),r(7,"Bytes Recibidos"),n(),t(8,"span",68),r(9),n()(),t(10,"div",66)(11,"span",67),r(12,"Bytes Enviados"),n(),t(13,"span",68),r(14),n()(),t(15,"div",66)(16,"span",67),r(17,"Total Bytes"),n(),t(18,"span",68),r(19),n()(),t(20,"div",66)(21,"span",67),r(22,"Velocidad Descarga"),n(),t(23,"span",75),r(24),n()(),t(25,"div",66)(26,"span",67),r(27,"Velocidad Subida"),n(),t(28,"span",76),r(29),n()(),t(30,"div",66)(31,"span",67),r(32,"Conexiones Activas"),n(),t(33,"span",68),r(34),n()()()()),l&2){let e=p().ngIf;s(9),u(e.process.systemInfo.network.rxBytesFormatted||"---"),s(5),u(e.process.systemInfo.network.txBytesFormatted||"---"),s(5),u(e.process.systemInfo.network.totalBytesFormatted||"---"),s(5),u(e.process.systemInfo.network.rxRate||"---"),s(5),u(e.process.systemInfo.network.txRate||"---"),s(5),u(e.process.systemInfo.network.activeConnections||"---")}}function Ee(l,i){if(l&1&&(t(0,"div",62)(1,"h4",63),_(2,"i",77),r(3," Informaci\xF3n del Canal "),n(),t(4,"div",65)(5,"div",66)(6,"span",67),r(7,"Estado"),n(),t(8,"span",68),r(9),n()(),t(10,"div",66)(11,"span",67),r(12,"PID"),n(),t(13,"span",68),r(14),n()(),t(15,"div",66)(16,"span",67),r(17,"Auto Reinicio"),n(),t(18,"span",68),r(19),n()(),t(20,"div",69)(21,"span",67),r(22,"URL de Entrada"),n(),t(23,"code",68),r(24),n()()()()),l&2){let e=p().ngIf;s(8),A(e.channel.status),s(),O(" ",e.channel.status==="running"?"En Ejecuci\xF3n":e.channel.status==="stopped"?"Detenido":e.channel.status==="restarting"?"Reiniciando":e.channel.status==="error"?"Error":"Desconocido"," "),s(5),u(e.channel.pid||"---"),s(5),u(e.channel.auto_restart?"S\xED":"No"),s(5),u(e.channel.input_url||"---")}}function ke(l,i){if(l&1&&(t(0,"div"),f(1,Oe,38,15,"div",61)(2,Pe,32,11,"div",61)(3,we,35,6,"div",61)(4,Ee,25,6,"div",61),n()),l&2){let e=i.ngIf;s(),d("ngIf",e.process==null?null:e.process.ffmpegStats),s(),d("ngIf",e.process==null?null:e.process.systemInfo),s(),d("ngIf",e.process==null||e.process.systemInfo==null?null:e.process.systemInfo.network),s(),d("ngIf",e.channel)}}function Ie(l,i){l&1&&(t(0,"div",78),_(1,"i",19),t(2,"p"),r(3,"No hay estad\xEDsticas disponibles en este momento."),n(),t(4,"small"),r(5,"Las estad\xEDsticas aparecer\xE1n cuando el canal est\xE9 en ejecuci\xF3n."),n()())}function Te(l,i){if(l&1&&(t(0,"div",59),f(1,ke,5,4,"div",60)(2,Ie,6,0,"ng-template",null,1,J),n()),l&2){let e=U(3),a=p();s(),d("ngIf",a.getChannelStats())("ngIfElse",e)}}function De(l,i){if(l&1){let e=C();t(0,"button",21),x("click",function(){m(e);let o=p();return g(o.activeTab="logs")}),_(1,"i",79),r(2," Logs "),n()}if(l&2){let e=p();S("active",e.activeTab==="logs")}}function Ve(l,i){if(l&1&&(t(0,"option",121),r(1),n()),l&2){let e=i.$implicit;d("value",e.stream_index.toString()),s(),K(" Pista ",e.index," - ",e.codec," (",e.bitrate,", ",e.channels,"ch",e.language?", "+e.language:"","",e.title?" - "+e.title:" - \xCDndice "+e.stream_index,") ")}}function Fe(l,i){l&1&&_(0,"i",122)}function Ae(l,i){l&1&&(t(0,"small",123),r(1,' Haz clic en "Analizar" para cargar las pistas de audio disponibles del stream. '),n())}function Ne(l,i){if(l&1&&(t(0,"small",123),r(1),n()),l&2){let e=p(3);s(),O(" ",e.audioTracks().length," pista(s) de audio disponible(s). ")}}function We(l,i){if(l&1){let e=C();t(0,"div",49)(1,"label"),r(2,"Preset de Compresi\xF3n"),n(),t(3,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.preset,o)||(c.ffmpegSimple.preset=o),g(o)}),t(4,"option",124),r(5,"Ultrafast (Bajo CPU)"),n(),t(6,"option",125),r(7,"Superfast"),n(),t(8,"option",126),r(9,"Veryfast (Recomendado)"),n(),t(10,"option",127),r(11,"Faster"),n(),t(12,"option",128),r(13,"Fast"),n(),t(14,"option",129),r(15,"Medium"),n(),t(16,"option",130),r(17,"Slow"),n(),t(18,"option",131),r(19,"Slower"),n(),t(20,"option",132),r(21,"Veryslow (Mejor calidad)"),n()()()}if(l&2){let e=p(3);s(3),v("ngModel",e.ffmpegSimple.preset),d("disabled",e.currentStatus()==="running")}}function Le(l,i){if(l&1){let e=C();t(0,"div",49)(1,"label"),r(2,"Tune"),n(),t(3,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.tune,o)||(c.ffmpegSimple.tune=o),g(o)}),t(4,"option",95),r(5,"Ninguno"),n(),t(6,"option",133),r(7,"Film"),n(),t(8,"option",134),r(9,"Animation"),n(),t(10,"option",135),r(11,"Grain"),n(),t(12,"option",136),r(13,"Stillimage"),n(),t(14,"option",137),r(15,"PSNR"),n(),t(16,"option",138),r(17,"SSIM"),n(),t(18,"option",139),r(19,"Fastdecode"),n(),t(20,"option",140),r(21,"Zerolatency"),n()()()}if(l&2){let e=p(3);s(3),v("ngModel",e.ffmpegSimple.tune),d("disabled",e.currentStatus()==="running")}}function ze(l,i){if(l&1){let e=C();t(0,"div",49)(1,"label"),r(2,"Profile"),n(),t(3,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.profile,o)||(c.ffmpegSimple.profile=o),g(o)}),t(4,"option",95),r(5,"Auto"),n(),t(6,"option",141),r(7,"Baseline"),n(),t(8,"option",142),r(9,"Main"),n(),t(10,"option",143),r(11,"High"),n()()()}if(l&2){let e=p(3);s(3),v("ngModel",e.ffmpegSimple.profile),d("disabled",e.currentStatus()==="running")}}function Be(l,i){if(l&1){let e=C();t(0,"div",144)(1,"input",145),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.key,o)||(c.key=o),g(o)}),n(),t(2,"input",146),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.value,o)||(c.value=o),g(o)}),n(),t(3,"button",147),x("click",function(){let o=m(e).index,c=p(3);return g(c.removeInputOption(o))}),r(4,"\xD7"),n()()}if(l&2){let e=i.$implicit,a=p(3);s(),v("ngModel",e.key),d("disabled",a.currentStatus()==="running"),s(),v("ngModel",e.value),d("disabled",a.currentStatus()==="running"),s(),d("disabled",a.currentStatus()==="running")}}function Re(l,i){if(l&1){let e=C();t(0,"div",85)(1,"div",49)(2,"label"),r(3,"Video Codec"),n(),t(4,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.video_codec,o)||(c.ffmpegSimple.video_codec=o),g(o)}),t(5,"option",87),r(6,"Copiar (Sin transcodificar)"),n(),t(7,"option",88),r(8,"H.264 (libx264)"),n(),t(9,"option",89),r(10,"H.265 (libx265)"),n(),t(11,"option",90),r(12,"MPEG-2 Video"),n()()(),t(13,"div",49)(14,"label"),r(15,"Audio Codec"),n(),t(16,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.audio_codec,o)||(c.ffmpegSimple.audio_codec=o),g(o)}),t(17,"option",87),r(18,"Copiar (Sin transcodificar)"),n(),t(19,"option",91),r(20,"AAC"),n(),t(21,"option",92),r(22,"AC3"),n(),t(23,"option",93),r(24,"MP3"),n()()(),t(25,"div",49)(26,"label"),r(27,"Pista de Audio (audio_stream_index)"),n(),t(28,"div",94)(29,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.audio_stream_index,o)||(c.ffmpegSimple.audio_stream_index=o),g(o)}),t(30,"option",95),r(31,"Autom\xE1tico (Primera pista disponible)"),n(),f(32,Ve,2,7,"option",96),n(),t(33,"button",97),x("click",function(){m(e);let o=p(2);return g(o.analyzeAudioTracks())}),f(34,Fe,1,0,"i",98),r(35),n()(),f(36,Ae,2,0,"small",99)(37,Ne,2,1,"small",99),n(),t(38,"div",49)(39,"label"),r(40,"Bitrate Video (Ej: 2M, 500k)"),n(),t(41,"input",100),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.video_bitrate,o)||(c.ffmpegSimple.video_bitrate=o),g(o)}),n()(),t(42,"div",49)(43,"label"),r(44,"Bitrate Audio (Ej: 128k, 192k)"),n(),t(45,"input",100),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.audio_bitrate,o)||(c.ffmpegSimple.audio_bitrate=o),g(o)}),n()(),t(46,"div",49)(47,"label"),r(48,"Resoluci\xF3n"),n(),t(49,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.resolution,o)||(c.ffmpegSimple.resolution=o),g(o)}),t(50,"option",101),r(51,"Original"),n(),t(52,"option",102),r(53,"1080p (1920x1080)"),n(),t(54,"option",103),r(55,"720p (1280x720)"),n(),t(56,"option",104),r(57,"480p (854x480)"),n(),t(58,"option",105),r(59,"360p (640x360)"),n()()(),f(60,We,22,2,"div",106)(61,Le,22,2,"div",106)(62,ze,12,2,"div",106),t(63,"div",49)(64,"label"),r(65,"GOP (G)"),n(),t(66,"input",107),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.g,o)||(c.ffmpegSimple.g=o),g(o)}),n()(),t(67,"div",49)(68,"label"),r(69,"Vsync"),n(),t(70,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.vsync,o)||(c.ffmpegSimple.vsync=o),g(o)}),t(71,"option",95),r(72,"Auto"),n(),t(73,"option",108),r(74,"0 (Passthrough)"),n(),t(75,"option",109),r(76,"1 (CFR)"),n(),t(77,"option",110),r(78,"2 (VFR)"),n(),t(79,"option",111),r(80,"Drop"),n(),t(81,"option",112),r(82,"CFR"),n(),t(83,"option",113),r(84,"VFR"),n()()(),t(85,"div",52)(86,"label"),r(87,"Fflags (FFmpeg)"),n(),t(88,"input",114),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.fflags,o)||(c.ffmpegSimple.fflags=o),g(o)}),n()(),t(89,"div",115)(90,"div",116)(91,"label"),r(92,"Input Options (FFmpeg Global)"),n(),t(93,"button",117),x("click",function(){m(e);let o=p(2);return g(o.addInputOption())}),_(94,"i",118),r(95," A\xF1adir "),n()(),t(96,"div",119),f(97,Be,5,5,"div",120),n()()()}if(l&2){let e=p(2);s(4),v("ngModel",e.ffmpegSimple.video_codec),d("disabled",e.currentStatus()==="running"),s(12),v("ngModel",e.ffmpegSimple.audio_codec),d("disabled",e.currentStatus()==="running"),s(13),v("ngModel",e.ffmpegSimple.audio_stream_index),d("disabled",e.currentStatus()==="running"||e.isAnalyzingAudio()),s(3),d("ngForOf",e.audioTracks()),s(),d("disabled",e.isAnalyzingAudio()||e.currentStatus()==="running"||!e.model.input_url),s(),d("ngIf",e.isAnalyzingAudio()),s(),O(" ",e.isAnalyzingAudio()?"Analizando...":"Analizar"," "),s(),d("ngIf",e.audioTracks().length===0&&!e.isAnalyzingAudio()),s(),d("ngIf",e.audioTracks().length>0),s(4),v("ngModel",e.ffmpegSimple.video_bitrate),d("disabled",e.currentStatus()==="running"),s(4),v("ngModel",e.ffmpegSimple.audio_bitrate),d("disabled",e.currentStatus()==="running"),s(4),v("ngModel",e.ffmpegSimple.resolution),d("disabled",e.currentStatus()==="running"),s(11),d("ngIf",e.ffmpegSimple.video_codec.includes("x26")),s(),d("ngIf",e.ffmpegSimple.video_codec.includes("x26")),s(),d("ngIf",e.ffmpegSimple.video_codec.includes("x26")),s(4),v("ngModel",e.ffmpegSimple.g),d("disabled",e.currentStatus()==="running"),s(4),v("ngModel",e.ffmpegSimple.vsync),d("disabled",e.currentStatus()==="running"),s(18),v("ngModel",e.ffmpegSimple.fflags),d("disabled",e.currentStatus()==="running"),s(5),d("disabled",e.currentStatus()==="running"),s(4),d("ngForOf",e.ffmpegSimple.input_options)}}function je(l,i){if(l&1&&(t(0,"span",58),r(1),n()),l&2){let e=p(3);s(),u(e.validationErrors().ffmpeg_params)}}function Ue(l,i){if(l&1){let e=C();t(0,"div",148)(1,"div",149),r(2,'Usa "additional_params" para flags directos de FFmpeg (ej: "-tune zerolatency").'),n(),t(3,"textarea",150),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegParamsStr,o)||(c.ffmpegParamsStr=o),g(o)}),n(),f(4,je,2,1,"span",51),n()}if(l&2){let e=p(2);S("has-error",e.validationErrors().ffmpeg_params),s(3),v("ngModel",e.ffmpegParamsStr),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().ffmpeg_params)}}function Je(l,i){if(l&1){let e=C();t(0,"div",80)(1,"div",81)(2,"p"),r(3,"Configuraci\xF3n de FFmpeg para procesamiento de video y audio."),n(),t(4,"button",82),x("click",function(){m(e);let o=p();return g(o.toggleFfmpegExpertMode())}),r(5),n()(),f(6,Re,98,29,"div",83)(7,Ue,5,5,"div",84),n()}if(l&2){let e=p();s(5),O(" ",e.isFfmpegExpertMode()?"\u2728 Editor Simple":"\u{1F6E0}\uFE0F Modo Experto"," "),s(),d("ngIf",!e.isFfmpegExpertMode()),s(),d("ngIf",e.isFfmpegExpertMode())}}function He(l,i){if(l&1){let e=C();t(0,"input",165),b("ngModelChange",function(o){m(e);let c=p().$implicit;return h(c.host,o)||(c.host=o),g(o)}),n()}if(l&2){let e=p().$implicit,a=p(3);v("ngModel",e.host),d("disabled",a.currentStatus()==="running")}}function Ge(l,i){if(l&1){let e=C();t(0,"input",166),b("ngModelChange",function(o){m(e);let c=p().$implicit;return h(c.port,o)||(c.port=o),g(o)}),n()}if(l&2){let e=p().$implicit,a=p(3);v("ngModel",e.port),d("disabled",a.currentStatus()==="running")}}function qe(l,i){if(l&1){let e=C();t(0,"input",167),b("ngModelChange",function(o){m(e);let c=p().$implicit;return h(c.path,o)||(c.path=o),g(o)}),n()}if(l&2){let e=p().$implicit,a=p(3);v("ngModel",e.path),d("disabled",a.currentStatus()==="running")}}function Ye(l,i){if(l&1){let e=C();t(0,"div",157)(1,"div",158)(2,"select",86),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.type,o)||(c.type=o),g(o)}),x("ngModelChange",function(){let o=m(e).$implicit,c=p(3);return g(c.onOutputTypeChange(o))}),t(3,"option",159),r(4,"HLS"),n(),t(5,"option",160),r(6,"UDP"),n()(),f(7,He,1,2,"input",161)(8,Ge,1,2,"input",162)(9,qe,1,2,"input",163),n(),t(10,"button",164),x("click",function(){let o=m(e).index,c=p(3);return g(c.removeOutput(o))}),r(11,"\xD7"),n()()}if(l&2){let e=i.$implicit,a=p(3);s(2),v("ngModel",e.type),d("disabled",a.currentStatus()==="running"),s(5),d("ngIf",e.type==="udp"),s(),d("ngIf",e.type==="udp"),s(),d("ngIf",e.type==="hls"),s(),d("disabled",a.currentStatus()==="running")}}function Ke(l,i){if(l&1){let e=C();t(0,"div",154),f(1,Ye,12,6,"div",155),t(2,"button",156),x("click",function(){m(e);let o=p(2);return g(o.addOutput())}),r(3,"+ A\xF1adir nueva salida"),n()()}if(l&2){let e=p(2);s(),d("ngForOf",e.outputs())("ngForTrackBy",e.trackByOutput),s(),d("disabled",e.currentStatus()==="running")}}function Ze(l,i){if(l&1&&(t(0,"span",58),r(1),n()),l&2){let e=p(3);s(),u(e.validationErrors().outputs)}}function Qe(l,i){if(l&1){let e=C();t(0,"div",148)(1,"textarea",168),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.outputsStr,o)||(c.outputsStr=o),g(o)}),n(),f(2,Ze,2,1,"span",51),n()}if(l&2){let e=p(2);S("has-error",e.validationErrors().outputs),s(),v("ngModel",e.outputsStr),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().outputs)}}function Xe(l,i){if(l&1){let e=C();t(0,"div",144)(1,"input",172),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.key,o)||(c.key=o),g(o)}),n(),t(2,"input",173),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.value,o)||(c.value=o),g(o)}),n(),t(3,"button",147),x("click",function(){let o=m(e).index,c=p(3);return g(c.removeOutputOption(o))}),r(4,"\xD7"),n()()}if(l&2){let e=i.$implicit,a=p(3);s(),v("ngModel",e.key),d("disabled",a.currentStatus()==="running"),s(),v("ngModel",e.value),d("disabled",a.currentStatus()==="running"),s(),d("disabled",a.currentStatus()==="running")}}function $e(l,i){l&1&&(t(0,"div",174),r(1," No hay opciones de salida adicionales definidas. "),n())}function et(l,i){if(l&1){let e=C();t(0,"div",169)(1,"div",116)(2,"label"),_(3,"i",170),r(4," Par\xE1metros de Salida (Global Output Options)"),n(),t(5,"button",117),x("click",function(){m(e);let o=p(2);return g(o.addOutputOption())}),_(6,"i",118),r(7," A\xF1adir opci\xF3n "),n()(),t(8,"div",119),f(9,Xe,5,5,"div",120),n(),f(10,$e,2,0,"div",171),n()}if(l&2){let e=p(2);s(5),d("disabled",e.currentStatus()==="running"),s(4),d("ngForOf",e.ffmpegSimple.output_options),s(),d("ngIf",e.ffmpegSimple.output_options.length===0)}}function tt(l,i){if(l&1){let e=C();t(0,"div",151)(1,"div",81)(2,"p"),r(3,"Define los puntos de distribuci\xF3n (HLS, UDP)."),n(),t(4,"button",82),x("click",function(){m(e);let o=p();return g(o.toggleExpertMode())}),r(5),n()(),f(6,Ke,4,3,"div",152)(7,Qe,3,5,"div",84)(8,et,11,3,"div",153),n()}if(l&2){let e=p();s(5),O(" ",e.isExpertMode()?"\u2728 Editor Simple":"\u{1F6E0}\uFE0F Modo Experto"," "),s(),d("ngIf",!e.isExpertMode()),s(),d("ngIf",e.isExpertMode()),s(),d("ngIf",!e.isExpertMode())}}function nt(l,i){if(l&1&&(t(0,"div",183)(1,"span",184),r(2),T(3,"date"),n(),t(4,"span",185),r(5),n()()),l&2){let e=i.$implicit;A(e.level),s(2),u(D(3,4,e.created_at,"HH:mm:ss")),s(3),u(e.message)}}function it(l,i){l&1&&(t(0,"div",186),r(1,"No hay logs recientes."),n())}function ot(l,i){if(l&1){let e=C();t(0,"div",175)(1,"div",81)(2,"p"),r(3,"Registro de eventos y depuraci\xF3n en tiempo real."),n(),t(4,"div",176)(5,"button",177),x("click",function(){m(e);let o=p();return g(o.manualRefreshLogs())}),_(6,"i",12),r(7," Actualizar "),n(),t(8,"button",178),x("click",function(){m(e);let o=p();return g(o.clearLogs())}),_(9,"i",179),r(10," Limpiar "),n()()(),t(11,"div",180,2),f(13,nt,6,7,"div",181)(14,it,2,0,"div",182),n()()}if(l&2){let e=p();s(5),d("disabled",e.isRefreshingLogs()),s(),S("fa-rotate",!e.isRefreshingLogs())("fa-spinner",e.isRefreshingLogs())("fa-spin",e.isRefreshingLogs()),s(2),d("disabled",e.logs().length===0),s(5),d("ngForOf",e.logs()),s(),d("ngIf",e.logs().length===0)}}function rt(l,i){if(l&1&&(t(0,"div",187)(1,"div",81)(2,"p"),r(3,"Representaci\xF3n JSON del canal tal como se enviar\xEDa al backend."),n()(),t(4,"pre",188),r(5),n()()),l&2){let e=p();s(5),u(e.getRawJson())}}function at(l,i){if(l&1){let e=C();t(0,"button",197),x("click",function(){m(e);let o=p(2);return g(o.start())}),_(1,"i",12),r(2),n()}if(l&2){let e=p(2);d("disabled",e.pendingAction()!==null),s(),S("fa-play",e.pendingAction()!=="start")("fa-spinner",e.pendingAction()==="start")("fa-spin",e.pendingAction()==="start"),s(),O(" ",e.pendingAction()==="start"?"Iniciando...":"Iniciar"," ")}}function lt(l,i){if(l&1){let e=C();t(0,"button",198),x("click",function(){m(e);let o=p(2);return g(o.stop())}),_(1,"i",12),r(2),n()}if(l&2){let e=p(2);d("disabled",e.pendingAction()!==null),s(),S("fa-stop",e.pendingAction()!=="stop")("fa-spinner",e.pendingAction()==="stop")("fa-spin",e.pendingAction()==="stop"),s(),O(" ",e.pendingAction()==="stop"?"Deteniendo...":"Detener"," ")}}function st(l,i){if(l&1){let e=C();t(0,"div",189)(1,"div",18)(2,"h3"),_(3,"i",190),r(4," Control del Stream"),n()(),t(5,"div",24)(6,"div",191),_(7,"span",192),t(8,"span",8),r(9),n()(),t(10,"div",193),f(11,at,3,8,"button",194)(12,lt,3,8,"button",195),t(13,"button",196),x("click",function(){m(e);let o=p();return g(o.restart())}),_(14,"i",12),r(15),n()()()()}if(l&2){let e=p();s(6),A(e.currentStatus()),s(3),u(e.getStatusText()),s(2),d("ngIf",e.currentStatus()!=="running"&&e.currentStatus()!=="restarting"),s(),d("ngIf",e.currentStatus()==="running"||e.currentStatus()==="error"||e.currentStatus()==="restarting"),s(),d("disabled",e.pendingAction()!==null),s(),S("fa-rotate",e.pendingAction()!=="restart")("fa-spinner",e.pendingAction()==="restart")("fa-spin",e.pendingAction()==="restart"),s(),O(" ",e.pendingAction()==="restart"?"Reiniciando...":"Reiniciar"," ")}}function ct(l,i){if(l&1){let e=C();t(0,"div",201)(1,"div",202)(2,"span",203),r(3),n(),t(4,"span",204),r(5),n()(),t(6,"div",205)(7,"code",206),r(8),n(),t(9,"button",207),x("click",function(o){let c=m(e).$implicit,P=p(2);return g(P.copyUrl(c.fullUrl,o))}),_(10,"i",208),n()()()}if(l&2){let e=i.$implicit,a=i.index,o=p(2);s(2),A(o.getTypeClass(e.type)),s(),u(e.type),s(2),O("#",a+1),s(3),u(e.fullUrl)}}function dt(l,i){if(l&1&&(t(0,"div",199),f(1,ct,11,5,"div",200),n()),l&2){let e=p();s(),d("ngForOf",e.getAllOutputUrls())}}function pt(l,i){l&1&&(t(0,"div",209),_(1,"i",19),t(2,"span"),r(3,"No hay URLs de salida disponibles para este canal."),n()())}function mt(l,i){if(l&1){let e=C();t(0,"div",210)(1,"div",18)(2,"h3"),r(3,"Acciones Cr\xEDticas"),n()(),t(4,"div",24)(5,"p"),r(6,"Eliminar este canal detendr\xE1 todas las transmisiones asociadas permanentemente."),n(),t(7,"button",211),x("click",function(){m(e);let o=p();return g(o.delete())}),_(8,"i",212),r(9," Eliminar Canal "),n()()()}}var Ce=class l{isNew=!1;activeTab="advanced";basicInfoTab="basic";channel=y(null);logs=y([]);isSaving=y(!1);errorMessage=y(null);successMessage=y(null);isExpertMode=y(!1);isFfmpegExpertMode=y(!1);validationErrors=y({});isRefreshingLogs=y(!1);outputs=y([]);model={name:"",slug:"",input_url:"",auto_restart:!0};ffmpegParamsStr="{}";ffmpegSimple={video_codec:"copy",audio_codec:"copy",video_bitrate:"",audio_bitrate:"",resolution:"original",preset:"veryfast",tune:"",profile:"",g:"",vsync:"",fflags:"",audio_stream_index:"",input_options:[],output_options:[]};audioTracks=y([]);isAnalyzingAudio=y(!1);ffmpegParamsOther={};outputsStr="[]";channelService=F(fe);dialogService=F(ue);socketService=F(_e);route=F(ne);router=F(ie);pendingAction=y(null);constructor(){j(()=>{let i=this.currentStatus();this.pendingAction()&&(this.pendingAction()==="start"&&i==="running"||this.pendingAction()==="stop"&&(i==="stopped"||i==="error")||this.pendingAction()==="restart"&&(i==="running"||i==="restarting"))&&this.pendingAction.set(null)}),j(()=>{let i=this.channel()?.id;if(!i)return;let a=this.socketService.allStats().find(o=>{let c=o.channel?.id;return String(c)===String(i)});if(a&&a.channel){let o=this.channel();o&&a.channel.status&&a.channel.status!==o.status&&this.channel.set(I(w({},o),{status:a.channel.status}))}})}currentStatus=Z(()=>{let i=this.channel()?.id;if(!i)return"stopped";let e=this.channel();if(!e)return"stopped";let a=e.status;if(a==="error")return"error";if(a==="restarting")return"restarting";if(!this.socketService.isConnected())return a==="running"?"running":"stopped";let c=this.socketService.allStats().find(P=>{let E=P.channel?.id;return String(E)===String(i)});if(c){let P=c.channel?.status;return P==="restarting"?"restarting":P==="error"?"error":c.process?.isRunning===!0?"running":"stopped"}return a==="running"?"running":"stopped"});ngOnInit(){let i=this.route.snapshot.paramMap.get("id");this.socketService.subscribeToAll(),i==="new"?(this.isNew=!0,this.addOutput()):i&&(this.loadChannel(i),this.loadLogs(i),this.socketService.subscribeToChannel(i))}ngOnDestroy(){let i=this.route.snapshot.paramMap.get("id");i&&i!=="new"&&this.socketService.unsubscribeFromChannel(i)}loadChannel(i){this.channelService.getChannel(i).subscribe(e=>{e.slug||(e.slug=this.generateSlug(e.name)),this.channel.set(e),this.model=w({},e),this.ffmpegParamsStr=JSON.stringify(e.ffmpeg_params,null,2),this.syncFfmpegToSimple(e.ffmpeg_params||{}),this.outputsStr=JSON.stringify(e.outputs,null,2),this.outputs.set(JSON.parse(JSON.stringify(e.outputs||[]))),e.input_url&&e.input_url.trim()&&setTimeout(()=>this.analyzeAudioTracks(),300)})}syncFfmpegToSimple(i){let q=i||{},{video_codec:e,audio_codec:a,video_bitrate:o,audio_bitrate:c,resolution:P,preset:E,tune:V,profile:k,g:N,vsync:M,fflags:L,audio_stream_index:z,input_options:H,output_options:G}=q,xe=W(q,["video_codec","audio_codec","video_bitrate","audio_bitrate","resolution","preset","tune","profile","g","vsync","fflags","audio_stream_index","input_options","output_options"]);this.ffmpegSimple={video_codec:e||"copy",audio_codec:a||"copy",video_bitrate:o||"",audio_bitrate:c||"",resolution:P||"original",preset:E||"veryfast",tune:V||"",profile:k||"",g:N||"",vsync:M||"",fflags:L||"",audio_stream_index:z!=null?String(z):"",input_options:H?Object.entries(H).map(([B,R])=>({key:B,value:String(R)})):[],output_options:G?Object.entries(G).map(([B,R])=>({key:B,value:String(R)})):[]},this.ffmpegParamsOther=xe}syncFfmpegFromSimple(){let i=I(w({},this.ffmpegParamsOther),{video_codec:this.ffmpegSimple.video_codec,audio_codec:this.ffmpegSimple.audio_codec});if(this.ffmpegSimple.video_bitrate&&(i.video_bitrate=this.ffmpegSimple.video_bitrate),this.ffmpegSimple.audio_bitrate&&(i.audio_bitrate=this.ffmpegSimple.audio_bitrate),this.ffmpegSimple.resolution!=="original"&&(i.resolution=this.ffmpegSimple.resolution),this.ffmpegSimple.video_codec.includes("x26")&&(i.preset=this.ffmpegSimple.preset,this.ffmpegSimple.tune&&(i.tune=this.ffmpegSimple.tune),this.ffmpegSimple.profile&&(i.profile=this.ffmpegSimple.profile)),this.ffmpegSimple.g&&(i.g=this.ffmpegSimple.g),this.ffmpegSimple.vsync&&(i.vsync=this.ffmpegSimple.vsync),this.ffmpegSimple.fflags&&(i.fflags=this.ffmpegSimple.fflags),this.ffmpegSimple.audio_stream_index&&this.ffmpegSimple.audio_stream_index.trim()!==""){let e=parseInt(this.ffmpegSimple.audio_stream_index.trim());isNaN(e)||(i.audio_stream_index=e)}return this.ffmpegSimple.input_options.length>0&&(i.input_options={},this.ffmpegSimple.input_options.forEach(e=>{e.key.trim()&&(i.input_options[e.key.trim()]=e.value)})),this.ffmpegSimple.output_options.length>0&&(i.output_options={},this.ffmpegSimple.output_options.forEach(e=>{e.key.trim()&&(i.output_options[e.key.trim()]=e.value)})),i}addInputOption(){this.ffmpegSimple.input_options.push({key:"",value:""})}removeInputOption(i){this.ffmpegSimple.input_options.splice(i,1)}addOutputOption(){this.ffmpegSimple.output_options.push({key:"",value:""})}removeOutputOption(i){this.ffmpegSimple.output_options.splice(i,1)}loadLogs(i){this.channelService.getChannelLogs(i).subscribe({next:e=>{this.logs.set(e.logs),this.isRefreshingLogs.set(!1)},error:()=>this.isRefreshingLogs.set(!1)})}manualRefreshLogs(){let i=this.channel()?.id;i&&(this.isRefreshingLogs.set(!0),this.loadLogs(i))}save(){this.errorMessage.set(null),this.validationErrors.set({});let i={};this.model.name?.trim()||(i.name="El nombre es obligatorio"),this.model.input_url?.trim()||(i.input_url="La URL de entrada es obligatoria");let e={};if(this.isFfmpegExpertMode())try{e=JSON.parse(this.ffmpegParamsStr)}catch{i.ffmpeg_params="Formato JSON inv\xE1lido"}else e=this.syncFfmpegFromSimple();let a=this.isExpertMode()?[]:this.outputs();if(this.isExpertMode())try{a=JSON.parse(this.outputsStr)}catch{i.outputs="Formato JSON de salidas inv\xE1lido"}if(!Array.isArray(a)||a.length===0?i.outputs="Al menos una salida es obligatoria":a.forEach((M,L)=>{M.type==="hls"&&!M.path?.trim()&&this.isNew,M.type==="udp"&&(!M.host?.trim()||!M.port)&&(i.outputs=`La salida UDP #${L+1} requiere Host y Puerto`)}),Object.keys(i).length>0){this.validationErrors.set(i);return}this.isSaving.set(!0);let N=this.model,{outputs:o,slug:c,ffmpeg_params:P}=N,E=W(N,["outputs","slug","ffmpeg_params"]),V=I(w({},E),{slug:this.model.slug,ffmpeg_params:e,outputs:a.map(M=>M.type==="udp"?I(w({},M),{port:Number(M.port)}):M)});(this.isNew?this.channelService.createChannel(V):this.channelService.updateChannel(this.channel().id,V)).subscribe({next:M=>{this.isSaving.set(!1),this.successMessage.set("Canal guardado correctamente."),this.isNew?this.router.navigate(["/channels"]):(this.channel.set(M),this.model=w({},M),this.ffmpegParamsStr=JSON.stringify(M.ffmpeg_params,null,2),this.syncFfmpegToSimple(M.ffmpeg_params),this.outputsStr=JSON.stringify(M.outputs,null,2),this.outputs.set(JSON.parse(JSON.stringify(M.outputs||[]))),setTimeout(()=>this.successMessage.set(null),3e3))},error:M=>{this.isSaving.set(!1),this.errorMessage.set(M.error?.message||"Error al guardar el canal.")}})}onNameChange(i){(this.isNew||!this.channel()?.slug)&&(this.model.slug=this.generateSlug(i))}generateSlug(i){return i.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}toggleFfmpegExpertMode(){if(this.isFfmpegExpertMode())try{let i=JSON.parse(this.ffmpegParamsStr);this.syncFfmpegToSimple(i),this.isFfmpegExpertMode.set(!1)}catch{confirm("JSON inv\xE1lido. \xBFPerder cambios?")&&this.isFfmpegExpertMode.set(!1)}else this.ffmpegParamsStr=JSON.stringify(this.syncFfmpegFromSimple(),null,2),this.isFfmpegExpertMode.set(!0)}toggleExpertMode(){if(this.isExpertMode())try{this.outputs.set(JSON.parse(this.outputsStr)),this.isExpertMode.set(!1)}catch{confirm("JSON de salidas inv\xE1lido. \xBFPerder cambios?")&&this.isExpertMode.set(!1)}else this.outputsStr=JSON.stringify(this.outputs(),null,2),this.isExpertMode.set(!0)}addOutput(){this.outputs.update(i=>[...i,{type:"hls",path:""}])}onOutputTypeChange(i){i.type==="hls"?(delete i.host,delete i.port):(delete i.path,i.host="",i.port=5e3)}removeOutput(i){this.outputs.update(e=>e.filter((a,o)=>o!==i))}trackByOutput(i,e){return`${i}-${e.type}`}async delete(){await this.dialogService.confirm({title:"Eliminar Canal",message:"\xBFEst\xE1s seguro de que deseas eliminar este canal? Esta acci\xF3n es irreversible.",type:"danger"})&&this.channelService.deleteChannel(this.channel().id).subscribe(()=>this.router.navigate(["/channels"]))}async clearLogs(){let i=this.channel()?.id;if(!i)return;await this.dialogService.confirm({title:"Limpiar Logs",message:"\xBFEst\xE1s seguro de que deseas limpiar todos los logs de este canal?",type:"danger"})&&this.channelService.clearChannelLogs(i).subscribe({next:()=>this.logs.set([]),error:a=>console.error("Error clearing logs:",a)})}start(){let i=this.channel()?.id;i&&(this.pendingAction.set("start"),this.channelService.startChannel(i).subscribe({next:()=>{setTimeout(()=>{this.pendingAction()==="start"&&this.pendingAction.set(null)},5e3)},error:()=>this.pendingAction.set(null)}))}stop(){let i=this.channel()?.id;i&&(this.pendingAction.set("stop"),this.channelService.stopChannel(i).subscribe({next:()=>{setTimeout(()=>{this.pendingAction()==="stop"&&this.pendingAction.set(null)},5e3)},error:()=>this.pendingAction.set(null)}))}restart(){let i=this.channel()?.id;i&&(this.pendingAction.set("restart"),this.channelService.restartChannel(i).subscribe({next:()=>{setTimeout(()=>{this.pendingAction()==="restart"&&this.pendingAction.set(null)},5e3)},error:()=>this.pendingAction.set(null)}))}getPrimaryOutputUrl(){let i=this.channel();if(!i)return"Generando...";if(i.urlOutputs){if(i.urlOutputs.hls&&i.urlOutputs.hls.length>0)return i.urlOutputs.hls[0].fullUrl;if(i.urlOutputs.udp&&i.urlOutputs.udp.length>0)return i.urlOutputs.udp[0].fullUrl;if(i.urlOutputs.dvb&&i.urlOutputs.dvb.length>0)return i.urlOutputs.dvb[0].fullUrl;if(i.urlOutputs.file&&i.urlOutputs.file.length>0)return i.urlOutputs.file[0].fullUrl}if(!i.outputs||i.outputs.length===0)return"Sin salida";let e=i.outputs.find(c=>c.type==="hls")||i.outputs[0],a=i.slug||this.generateSlug(i.name),o=oe.apiUrl.replace("/api","");return e.type==="hls"?`${o}/media/${a}/index.m3u8`:e.type==="udp"?e.host&&e.port?`udp://${e.host}:${e.port}`:e.url||"udp://...":"URL no disponible"}getAllOutputUrls(){let i=this.channel();if(!i||!i.urlOutputs)return[];let e=[];return i.urlOutputs.hls&&i.urlOutputs.hls.forEach(a=>{e.push({type:"HLS",fullUrl:a.fullUrl})}),i.urlOutputs.udp&&i.urlOutputs.udp.forEach(a=>{e.push({type:"UDP",fullUrl:a.fullUrl})}),i.urlOutputs.dvb&&i.urlOutputs.dvb.forEach(a=>{e.push({type:"DVB",fullUrl:a.fullUrl})}),i.urlOutputs.file&&i.urlOutputs.file.forEach(a=>{e.push({type:"File",fullUrl:a.fullUrl})}),e}getTypeClass(i){return i.toLowerCase()}async copyToClipboard(i){if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(i),!0}catch(e){console.warn("Clipboard API failed, trying fallback:",e)}try{let e=document.createElement("textarea");e.value=i,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();let a=document.execCommand("copy");return document.body.removeChild(e),a}catch(e){return console.error("Fallback copy failed:",e),!1}}copyUrl(i,e){e.stopPropagation(),!(i==="Generando..."||i==="Sin salida"||i==="URL no disponible")&&this.copyToClipboard(i).then(a=>{if(a){let o=e.currentTarget,c=o.innerHTML;o.innerHTML='<i class="fa-solid fa-check"></i>',setTimeout(()=>{o.innerHTML=c},2e3)}})}getRawJson(){try{let e={};this.isFfmpegExpertMode()?e=JSON.parse(this.ffmpegParamsStr||"{}"):e=this.syncFfmpegFromSimple();let a=[];this.isExpertMode()?a=JSON.parse(this.outputsStr||"[]"):a=this.outputs();let i=this.model,{outputs:o,slug:c,ffmpeg_params:P}=i,E=W(i,["outputs","slug","ffmpeg_params"]),V=I(w({},E),{slug:this.model.slug,ffmpeg_params:e,outputs:a.map(k=>k.type==="udp"?I(w({},k),{port:Number(k.port)}):k)});return JSON.stringify(V,null,2)}catch{return"JSON inv\xE1lido en los editores expertos."}}getStatusText(){switch(this.currentStatus()){case"running":return"En ejecuci\xF3n";case"error":return"Error";case"restarting":return"Reiniciando";default:return"Detenido"}}analyzeAudioTracks(){let i=this.model.input_url?.trim();if(!i){this.errorMessage.set("Por favor, ingresa una URL de entrada primero.");return}this.isAnalyzingAudio.set(!0),this.errorMessage.set(null),this.audioTracks.set([]),this.channelService.analyzeAudio(i).subscribe({next:e=>{if(this.isAnalyzingAudio.set(!1),e.audio_tracks&&e.audio_tracks.tracks)if(this.audioTracks.set(e.audio_tracks.tracks),e.audio_tracks.tracks.length===0)this.errorMessage.set("No se encontraron pistas de audio en el stream.");else{let a=this.ffmpegSimple.audio_stream_index;a&&a.trim()!==""&&(e.audio_tracks.tracks.some(c=>String(c.stream_index)===a.trim())||(this.ffmpegSimple.audio_stream_index=""))}else this.errorMessage.set("No se pudieron obtener las pistas de audio.")},error:e=>{this.isAnalyzingAudio.set(!1),this.errorMessage.set(e.error?.message||"Error al analizar las pistas de audio.")}})}getChannelStats(){let i=this.channel()?.id;return i&&this.socketService.allStats().find(o=>{let c=o.channel?.id;return String(c)===String(i)})||null}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=Y({type:l,selectors:[["app-channel-detail"]],decls:60,vars:32,consts:[["noOutputs",""],["noStats",""],["logsRef",""],[1,"detail-container"],[1,"header-section"],[1,"title-area"],[1,"btn-back",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"text"],[1,"subtitle"],[1,"header-actions"],[1,"btn-primary","main-save",3,"click","disabled"],[1,"fa-solid"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"detail-grid"],[1,"main-form"],[1,"premium-card"],[1,"card-header"],[1,"fa-solid","fa-circle-info"],[1,"card-tabs","basic-tabs"],[3,"click"],[1,"fa-solid","fa-edit"],[3,"active","click",4,"ngIf"],[1,"card-body"],["class","form-grid",4,"ngIf"],["class","stats-view",4,"ngIf"],[1,"premium-card","config-card"],[1,"card-tabs"],[1,"fa-solid","fa-sliders"],[1,"fa-solid","fa-share-nodes"],[1,"fa-solid","fa-bug"],[1,"card-body","tab-content-area"],["class","advanced-section",4,"ngIf"],["class","outputs-section",4,"ngIf"],["class","logs-section",4,"ngIf"],["class","debug-section",4,"ngIf"],[1,"side-panel"],["class","premium-card control-card",4,"ngIf"],[1,"fa-solid","fa-link"],["class","outputs-list-container",4,"ngIf","ngIfElse"],["class","premium-card danger-card",4,"ngIf"],[1,"alert","alert-danger"],[1,"fa-solid","fa-circle-exclamation"],[1,"close-alert",3,"click"],[1,"alert","alert-success"],[1,"fa-solid","fa-circle-check"],[1,"fa-solid","fa-chart-line"],[1,"form-grid"],[1,"form-group"],["type","text","placeholder","Ej: Canal Premium HD",3,"ngModelChange","ngModel","disabled"],["class","error-text",4,"ngIf"],[1,"form-group","full-width"],["type","text","placeholder","udp://@239.1.1.1:5000",3,"ngModelChange","ngModel","disabled"],[1,"form-group","full-width","checkbox-row"],[1,"checkbox-container"],["type","checkbox","id","auto_restart",3,"ngModelChange","ngModel","disabled"],[1,"checkmark"],[1,"error-text"],[1,"stats-view"],[4,"ngIf","ngIfElse"],["class","stats-section",4,"ngIf"],[1,"stats-section"],[1,"stats-section-title"],[1,"fa-solid","fa-video"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"stat-item","full-width"],[1,"fa-solid","fa-microchip"],[1,"stat-value","cpu"],[1,"stat-value","memory"],[1,"stat-value","command"],[1,"fa-solid","fa-network-wired"],[1,"stat-value","net-in"],[1,"stat-value","net-out"],[1,"fa-solid","fa-info-circle"],[1,"no-stats-message"],[1,"fa-solid","fa-terminal"],[1,"advanced-section"],[1,"section-subheader"],[1,"btn-outline-small",3,"click"],["class","ffmpeg-simple-grid",4,"ngIf"],["class","json-editor",3,"has-error",4,"ngIf"],[1,"ffmpeg-simple-grid"],[3,"ngModelChange","ngModel","disabled"],["value","copy"],["value","libx264"],["value","libx265"],["value","mpeg2video"],["value","aac"],["value","ac3"],["value","mp3"],[1,"audio-track-selector"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn-analyze-audio",3,"click","disabled"],["class","fa-solid fa-spinner fa-spin",4,"ngIf"],["class","field-hint",4,"ngIf"],["type","text","placeholder","Original",3,"ngModelChange","ngModel","disabled"],["value","original"],["value","1920x1080"],["value","1280x720"],["value","854x480"],["value","640x360"],["class","form-group",4,"ngIf"],["type","text","placeholder","Ej: 50",3,"ngModelChange","ngModel","disabled"],["value","0"],["value","1"],["value","2"],["value","drop"],["value","cfr"],["value","vfr"],["type","text","placeholder","+genpts+discardcorrupt",3,"ngModelChange","ngModel","disabled"],[1,"options-container","full-width"],[1,"options-header"],["type","button",1,"btn-add-mini",3,"click","disabled"],[1,"fa-solid","fa-plus"],[1,"options-list"],["class","option-item",4,"ngFor","ngForOf"],[3,"value"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"field-hint"],["value","ultrafast"],["value","superfast"],["value","veryfast"],["value","faster"],["value","fast"],["value","medium"],["value","slow"],["value","slower"],["value","veryslow"],["value","film"],["value","animation"],["value","grain"],["value","stillimage"],["value","psnr"],["value","ssim"],["value","fastdecode"],["value","zerolatency"],["value","baseline"],["value","main"],["value","high"],[1,"option-item"],["type","text","placeholder","Key (ej: reconnect)",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Value (ej: 1)",3,"ngModelChange","ngModel","disabled"],["type","button",1,"btn-remove-mini",3,"click","disabled"],[1,"json-editor"],[1,"json-hint"],["rows","10","placeholder",'{ "video_codec": "libx264", "additional_params": "-tune zerolatency" }',3,"ngModelChange","ngModel","disabled"],[1,"outputs-section"],["class","outputs-list",4,"ngIf"],["class","options-container global-output-options",4,"ngIf"],[1,"outputs-list"],["class","output-item-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-add-item",3,"click","disabled"],[1,"output-item-row"],[1,"row-fields"],["value","hls"],["value","udp"],["type","text","placeholder","IP/Host",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["type","number","placeholder","Puerto",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["type","text","placeholder","Ruta (Opcional)","class","full-row",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"btn-icon-danger",3,"click","disabled"],["type","text","placeholder","IP/Host",3,"ngModelChange","ngModel","disabled"],["type","number","placeholder","Puerto",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Ruta (Opcional)",1,"full-row",3,"ngModelChange","ngModel","disabled"],["rows","8","placeholder",'[ { "type": "hls", "path": "/..." } ]',3,"ngModelChange","ngModel","disabled"],[1,"options-container","global-output-options"],[1,"fa-solid","fa-gears"],["class","options-hint",4,"ngIf"],["type","text","placeholder","Key (ej: movflags)",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Value (ej: faststart)",3,"ngModelChange","ngModel","disabled"],[1,"options-hint"],[1,"logs-section"],[1,"subheader-actions"],[1,"btn-outline-small",3,"click","disabled"],[1,"btn-outline-small","btn-danger-subtle",3,"click","disabled"],[1,"fa-solid","fa-trash-can"],[1,"logs-console"],["class","log-line",3,"class",4,"ngFor","ngForOf"],["class","empty-msg",4,"ngIf"],[1,"log-line"],[1,"time"],[1,"msg"],[1,"empty-msg"],[1,"debug-section"],[1,"raw-json-pre"],[1,"premium-card","control-card"],[1,"fa-solid","fa-play"],[1,"status-indicator"],[1,"dot"],[1,"control-actions"],["class","btn-control start",3,"disabled","click",4,"ngIf"],["class","btn-control stop",3,"disabled","click",4,"ngIf"],[1,"btn-control","restart",3,"click","disabled"],[1,"btn-control","start",3,"click","disabled"],[1,"btn-control","stop",3,"click","disabled"],[1,"outputs-list-container"],["class","output-url-item",4,"ngFor","ngForOf"],[1,"output-url-item"],[1,"output-url-header"],[1,"url-type-badge"],[1,"url-number"],[1,"output-url-content"],[1,"output-url-text"],["title","Copiar URL",1,"mini-copy-btn",3,"click"],[1,"fa-regular","fa-copy"],[1,"no-outputs-message"],[1,"premium-card","danger-card"],[1,"btn-danger-outline",3,"click"],[1,"fa-solid","fa-trash"]],template:function(e,a){if(e&1){let o=C();t(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),x("click",function(){return m(o),g(a.router.navigate(["/channels"]))}),_(4,"i",7),n(),t(5,"div",8)(6,"h1"),r(7),n(),t(8,"p",9),r(9),n()()(),t(10,"div",10)(11,"button",11),x("click",function(){return m(o),g(a.save())}),_(12,"i",12),r(13),n()()(),f(14,ve,6,1,"div",13)(15,he,6,1,"div",14),t(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18)(20,"h3"),_(21,"i",19),r(22," Informaci\xF3n B\xE1sica"),n()(),t(23,"div",20)(24,"button",21),x("click",function(){return m(o),g(a.basicInfoTab="basic")}),_(25,"i",22),r(26," Configuraci\xF3n "),n(),f(27,be,3,2,"button",23),n(),t(28,"div",24),f(29,ye,16,12,"div",25)(30,Te,4,2,"div",26),n()(),t(31,"div",27)(32,"div",28)(33,"button",21),x("click",function(){return m(o),g(a.activeTab="advanced")}),_(34,"i",29),r(35," Transcodificaci\xF3n "),n(),t(36,"button",21),x("click",function(){return m(o),g(a.activeTab="outputs")}),_(37,"i",30),r(38," Salidas "),n(),f(39,De,3,2,"button",23),t(40,"button",21),x("click",function(){return m(o),g(a.activeTab="debug")}),_(41,"i",31),r(42," Super Experto "),n()(),t(43,"div",32),f(44,Je,8,3,"div",33)(45,tt,9,4,"div",34)(46,ot,15,10,"div",35)(47,rt,6,1,"div",36),n()()(),t(48,"div",37),f(49,st,16,13,"div",38),t(50,"div",17)(51,"div",18)(52,"h3"),_(53,"i",39),r(54," Salidas"),n()(),t(55,"div",24),f(56,dt,2,1,"div",40)(57,pt,4,0,"ng-template",null,0,J),n()(),f(59,mt,10,0,"div",41),n()()()}if(e&2){let o,c=U(58);s(7),u(a.isNew?"Nuevo Canal":"Editar Canal"),s(2),u(a.isNew?"Crea un nuevo canal para tu servicio OTT":"Modifica la configuraci\xF3n del canal: "+((o=a.channel())==null?null:o.name)),s(2),d("disabled",a.isSaving()||a.currentStatus()==="running"),s(),S("fa-save",!a.isSaving())("fa-spinner",a.isSaving())("fa-spin",a.isSaving()),s(),O(" ",a.isSaving()?"Guardando...":a.isNew?"Crear Canal":a.currentStatus()==="running"?"Bloqueado (En ejecuci\xF3n)":"Guardar Cambios"," "),s(),d("ngIf",a.errorMessage()),s(),d("ngIf",a.successMessage()),s(9),S("active",a.basicInfoTab==="basic"),s(3),d("ngIf",!a.isNew),s(2),d("ngIf",a.basicInfoTab==="basic"),s(),d("ngIf",a.basicInfoTab==="stats"&&!a.isNew),s(3),S("active",a.activeTab==="advanced"),s(3),S("active",a.activeTab==="outputs"),s(3),d("ngIf",!a.isNew),s(),S("active",a.activeTab==="debug"),s(4),d("ngIf",a.activeTab==="advanced"),s(),d("ngIf",a.activeTab==="outputs"),s(),d("ngIf",a.activeTab==="logs"),s(),d("ngIf",a.activeTab==="debug"),s(2),d("ngIf",!a.isNew),s(7),d("ngIf",a.getAllOutputUrls().length>0)("ngIfElse",c),s(3),d("ngIf",!a.isNew)}},dependencies:[te,Q,X,ge,pe,me,ae,ce,re,de,le,se,ee,$],styles:[".detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:var(--surface);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;color:var(--text-muted);transition:all .2s}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{color:var(--accent);border-color:var(--accent)}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin-bottom:.25rem}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary.main-save[_ngcontent-%COMP%]{padding:.75rem 2rem;font-weight:700;font-size:1rem;border-radius:12px;background:#475569;color:#fff;display:flex;align-items:center;gap:.75rem;transition:all .2s}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary.main-save[_ngcontent-%COMP%]:hover:not(:disabled){background:#1e293b;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary.main-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem;align-items:start}.premium-card[_ngcontent-%COMP%]{background:var(--surface);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow-sm);overflow:hidden;margin-bottom:1.5rem}.premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.25rem 1.75rem;border-bottom:1px solid var(--border);background:#f8fafc80}.premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;display:flex;align-items:center;gap:.75rem;color:#1e293b}.premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent);font-size:.9rem}.premium-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.75rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#475569}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.85rem 1.25rem;border:1px solid #e2e8f0;border-radius:12px;background:#f8fafc;font-size:.95rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);outline:none;background:#fff;box-shadow:0 0 0 3px #6366f11a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.checkbox-row[_ngcontent-%COMP%]{margin-top:.5rem}.checkbox-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-weight:600;font-size:.9rem;color:#1e293b;cursor:pointer;-webkit-user-select:none;user-select:none}.checkbox-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]{display:flex;background:#f1f5f9;padding:.5rem;gap:.5rem}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem;border-radius:10px;background:transparent;font-weight:600;font-size:.9rem;color:#64748b;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:var(--accent);box-shadow:0 2px 8px #0000000d}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.active):hover{color:#1e293b;background:#ffffff80}.config-card[_ngcontent-%COMP%]   .tab-content-area[_ngcontent-%COMP%]{padding-top:1.5rem}.basic-tabs[_ngcontent-%COMP%]{display:flex;background:#f1f5f9;padding:.5rem;gap:.5rem;border-bottom:1px solid var(--border)}.basic-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem;border-radius:10px;background:transparent;font-weight:600;font-size:.9rem;color:#64748b;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;border:none;cursor:pointer}.basic-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:var(--accent);box-shadow:0 2px 8px #0000000d}.basic-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.active):hover{color:#1e293b;background:#ffffff80}.stats-view[_ngcontent-%COMP%]{padding-top:1rem}.stats-section[_ngcontent-%COMP%]{margin-bottom:2rem}.stats-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.stats-section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#1e293b;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;padding-bottom:.75rem;border-bottom:2px solid #e2e8f0}.stats-section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.stats-grid[_ngcontent-%COMP%]   .stat-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1e293b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.cpu[_ngcontent-%COMP%]{color:#6366f1}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.memory[_ngcontent-%COMP%]{color:#f59e0b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.net-in[_ngcontent-%COMP%]{color:#22c55e}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.net-out[_ngcontent-%COMP%]{color:#3b82f6}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.running[_ngcontent-%COMP%]{color:#22c55e}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.stopped[_ngcontent-%COMP%]{color:#64748b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.restarting[_ngcontent-%COMP%]{color:#f59e0b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.error[_ngcontent-%COMP%]{color:#ef4444}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.command[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-size:.8rem;background:#f8fafc;padding:.5rem;border-radius:6px;border:1px solid #e2e8f0;word-break:break-all;font-weight:400;color:#475569}.no-stats-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#94a3b8}.no-stats-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#cbd5e1;display:block}.no-stats-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.5rem;color:#64748b}.no-stats-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.85rem;color:#94a3b8}.section-subheader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:.75rem;border-bottom:1px dashed var(--border)}.section-subheader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem;font-weight:500}.section-subheader[_ngcontent-%COMP%]   .subheader-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.ffmpeg-simple-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}.outputs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.output-item-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;padding:1rem;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0}.output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]{flex:1;display:flex;gap:.75rem}.output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem .85rem;font-size:.9rem;border-radius:8px}.output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]   .full-row[_ngcontent-%COMP%]{flex:1}.output-item-row[_ngcontent-%COMP%]   .btn-icon-danger[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;background:#fef2f2;color:#ef4444;font-weight:700}.output-item-row[_ngcontent-%COMP%]   .btn-icon-danger[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.btn-add-item[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px dashed #e2e8f0;border-radius:12px;background:transparent;color:#64748b;font-weight:600;transition:all .2s}.btn-add-item[_ngcontent-%COMP%]:hover{border-color:var(--accent);color:var(--accent);background:#6366f10d}.json-editor[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .raw-json-pre[_ngcontent-%COMP%]{width:100%;background:#0f172a;color:#38bdf8;font-family:JetBrains Mono,monospace;padding:1rem;border-radius:12px;resize:vertical;border:1px solid #334155;font-size:.85rem;line-height:1.5;margin:0}.raw-json-pre[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;white-space:pre-wrap;word-break:break-all}.json-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;margin-bottom:.5rem;font-style:italic}.outputs-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.output-url-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:1rem;transition:all .2s}.output-url-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.output-url-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.url-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.url-type-badge.hls[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.url-type-badge.udp[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.url-type-badge.dvb[_ngcontent-%COMP%]{background:#e9d5ff;color:#6b21a8}.url-type-badge.file[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.url-number[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);font-weight:600}.output-url-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.output-url-text[_ngcontent-%COMP%]{flex:1;font-family:JetBrains Mono,monospace;font-size:.85rem;color:#1e293b;background:#fff;padding:.75rem 1rem;border-radius:8px;border:1px solid #e2e8f0;word-break:break-all;line-height:1.5}.mini-copy-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:.5rem .75rem;border-radius:8px;color:#64748b;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.mini-copy-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;color:#1e293b}.no-outputs-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1.5rem;background:#f8fafc;border:1px dashed #e2e8f0;border-radius:12px;color:var(--text-muted);font-size:.9rem}.no-outputs-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#94a3b8}.options-container[_ngcontent-%COMP%]{background:#f8fafc;padding:1rem;border-radius:12px;border:1px solid #e2e8f0;margin-top:.5rem}.options-container[_ngcontent-%COMP%]   .options-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.options-container[_ngcontent-%COMP%]   .options-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;color:#475569}.options-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.options-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.options-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;font-size:.85rem}.options-container[_ngcontent-%COMP%]   .btn-add-mini[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .75rem;background:#f1f5f9;color:#475569;font-weight:600;border:1px solid #cbd5e1}.options-container[_ngcontent-%COMP%]   .btn-add-mini[_ngcontent-%COMP%]:hover{background:#e2e8f0}.options-container[_ngcontent-%COMP%]   .btn-remove-mini[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#fee2e2;color:#ef4444;display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:700}.options-container[_ngcontent-%COMP%]   .btn-remove-mini[_ngcontent-%COMP%]:hover{background:#fecaca}.dark[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151}.dark[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .btn-add-mini[_ngcontent-%COMP%]{background:#374151;color:#fff;border-color:#4b5563}.dark[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .btn-remove-mini[_ngcontent-%COMP%]{background:#450a0a;color:#f87171}.danger-card[_ngcontent-%COMP%]{border-color:#fecaca}.danger-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#fef2f2}.danger-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#991b1b}.danger-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc2626}.danger-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#991b1b;margin-bottom:1.25rem}.danger-card[_ngcontent-%COMP%]   .btn-danger-outline[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#fff;color:#dc2626;border:1px solid #dc2626;border-radius:10px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:.5rem}.danger-card[_ngcontent-%COMP%]   .btn-danger-outline[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.control-card[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem;font-weight:700;padding:.75rem 1rem;background:#f1f5f9;border-radius:12px}.control-card[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#94a3b8}.control-card[_ngcontent-%COMP%]   .status-indicator.running[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.control-card[_ngcontent-%COMP%]   .status-indicator.running[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 8px #10b981;animation:_ngcontent-%COMP%_pulse 2s infinite}.control-card[_ngcontent-%COMP%]   .status-indicator.error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.control-card[_ngcontent-%COMP%]   .status-indicator.error[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#ef4444;box-shadow:0 0 8px #ef4444}.control-card[_ngcontent-%COMP%]   .status-indicator.restarting[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.control-card[_ngcontent-%COMP%]   .status-indicator.restarting[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#f59e0b;box-shadow:0 0 8px #f59e0b;animation:_ngcontent-%COMP%_pulse 2s infinite}.control-card[_ngcontent-%COMP%]   .control-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.75rem}.control-card[_ngcontent-%COMP%]   .btn-control[_ngcontent-%COMP%]{padding:.75rem;border-radius:10px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:.6rem;transition:all .2s}.control-card[_ngcontent-%COMP%]   .btn-control.start[_ngcontent-%COMP%]{background:#10b981;color:#fff}.control-card[_ngcontent-%COMP%]   .btn-control.start[_ngcontent-%COMP%]:hover{background:#059669}.control-card[_ngcontent-%COMP%]   .btn-control.stop[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.control-card[_ngcontent-%COMP%]   .btn-control.stop[_ngcontent-%COMP%]:hover{background:#dc2626}.control-card[_ngcontent-%COMP%]   .btn-control.restart[_ngcontent-%COMP%]{background:#6366f1;color:#fff}.control-card[_ngcontent-%COMP%]   .btn-control.restart[_ngcontent-%COMP%]:hover{background:#4f46e5}.control-card[_ngcontent-%COMP%]   .btn-control[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.95);opacity:.8}50%{transform:scale(1.05);opacity:1}to{transform:scale(.95);opacity:.8}}.logs-console[_ngcontent-%COMP%]{background:#0f172a;padding:1rem;border-radius:12px;height:350px;overflow-y:auto;font-family:JetBrains Mono,monospace;font-size:.8rem}.logs-console[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{margin-bottom:.25rem}.logs-console[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#64748b;margin-right:.75rem}.logs-console[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#e2e8f0}.logs-console[_ngcontent-%COMP%]   .log-line.error[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#f87171}.logs-console[_ngcontent-%COMP%]   .log-line.warning[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#fbbf24}.logs-console[_ngcontent-%COMP%]   .empty-msg[_ngcontent-%COMP%]{color:#475569;text-align:center;margin-top:2rem;font-style:italic}.btn-outline-small[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:.4rem .85rem;font-size:.75rem;font-weight:700;border-radius:8px;color:#64748b;display:flex;align-items:center;gap:.5rem}.btn-outline-small[_ngcontent-%COMP%]:hover{border-color:var(--accent);color:var(--accent)}.btn-outline-small.btn-danger-subtle[_ngcontent-%COMP%]:hover{border-color:#ef4444;color:#ef4444;background:#fef2f2}.btn-outline-small[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dark[_ngcontent-%COMP%]   .premium-card[_ngcontent-%COMP%]{background:#111827;border-color:#1f2937}.dark[_ngcontent-%COMP%]   .premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#1f293780}.dark[_ngcontent-%COMP%]   .premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f3f4f6}.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#94a3b8}.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .output-url-item[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151}.dark[_ngcontent-%COMP%]   .output-url-item[_ngcontent-%COMP%]:hover{background:#374151}.dark[_ngcontent-%COMP%]   .output-url-text[_ngcontent-%COMP%]{background:#0f172a;color:#e2e8f0;border-color:#374151}.dark[_ngcontent-%COMP%]   .mini-copy-btn[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#94a3b8}.dark[_ngcontent-%COMP%]   .mini-copy-btn[_ngcontent-%COMP%]:hover{background:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .no-outputs-message[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#94a3b8}.dark[_ngcontent-%COMP%]   .config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]{background:#1f2937}.dark[_ngcontent-%COMP%]   .config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .basic-tabs[_ngcontent-%COMP%]{background:#1f2937}.dark[_ngcontent-%COMP%]   .basic-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .output-item-row[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151}.dark[_ngcontent-%COMP%]   .stats-section-title[_ngcontent-%COMP%]{color:#f3f4f6;border-bottom-color:#374151}.dark[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#e2e8f0}.dark[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.command[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#94a3b8}.dark[_ngcontent-%COMP%]   .no-stats-message[_ngcontent-%COMP%]{color:#94a3b8}.has-error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .has-error[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .has-error[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-color:#ef4444!important;background:#fef2f2!important}.has-error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ef4444!important}.has-error[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#ef4444;font-size:.75rem;font-weight:600;margin-top:.25rem;display:block}.audio-track-selector[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.audio-track-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]{padding:.6rem 1rem;background:#6366f1;color:#fff;border:none;border-radius:8px;font-weight:600;font-size:.85rem;display:flex;align-items:center;justify-content:center;gap:.5rem;cursor:pointer;transition:all .2s;white-space:nowrap}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1em;text-align:center;display:inline-flex;align-items:center;justify-content:center}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]:hover:not(:disabled){background:#4f46e5;transform:translateY(-1px)}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.field-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.75rem;color:#64748b;font-style:italic}.alert[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:12px;margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem;font-weight:600;position:relative;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.alert.alert-danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.alert.alert-success[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0}.alert[_ngcontent-%COMP%]   .close-alert[_ngcontent-%COMP%]{position:absolute;right:1rem;background:transparent;border:none;font-size:1.25rem;color:inherit;cursor:pointer;opacity:.5}.alert[_ngcontent-%COMP%]   .close-alert[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-10px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};export{Ce as ChannelDetailComponent};
