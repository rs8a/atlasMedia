import{a as ve}from"./chunk-FMJ76REX.js";import{a as fe}from"./chunk-CQQZDJZ5.js";import{a as Ce}from"./chunk-FEXXS4L7.js";import{a as le,b as se,c as ce,f as de,h as pe,i as me,j as ge,k as ue,m as _e}from"./chunk-OC3NIF5T.js";import{$ as P,Aa as oe,C as s,Ca as ae,G as Q,Ga as re,K as f,O as d,P as n,Q as i,R as _,S as v,T as C,U as p,V as j,X as y,Y as N,Z as a,_ as u,a as w,b as I,ba as Z,c as W,ca as X,da as x,ea as h,fa as b,ia as D,ka as T,la as J,ma as H,q as A,qa as $,r as m,ra as ee,s as g,ta as te,ua as ne,va as ie,w as S,x as z}from"./chunk-YAHRTPNZ.js";function be(l,t){if(l&1){let e=v();n(0,"div",42),_(1,"i",43),n(2,"span"),a(3),i(),n(4,"button",44),C("click",function(){m(e);let o=p();return g(o.errorMessage.set(null))}),a(5,"\xD7"),i()()}if(l&2){let e=p();s(3),u(e.errorMessage())}}function Me(l,t){if(l&1){let e=v();n(0,"div",45),_(1,"i",46),n(2,"span"),a(3),i(),n(4,"button",44),C("click",function(){m(e);let o=p();return g(o.successMessage.set(null))}),a(5,"\xD7"),i()()}if(l&2){let e=p();s(3),u(e.successMessage())}}function Se(l,t){if(l&1){let e=v();n(0,"button",21),C("click",function(){m(e);let o=p();return g(o.basicInfoTab="stats")}),_(1,"i",47),a(2," Estad\xEDsticas en Tiempo Real "),i()}if(l&2){let e=p();y("active",e.basicInfoTab==="stats")}}function ye(l,t){if(l&1&&(n(0,"span",58),a(1),i()),l&2){let e=p(2);s(),u(e.validationErrors().name)}}function Pe(l,t){if(l&1&&(n(0,"span",58),a(1),i()),l&2){let e=p(2);s(),u(e.validationErrors().input_url)}}function Oe(l,t){if(l&1){let e=v();n(0,"div",48)(1,"div",49)(2,"label"),a(3,"Nombre *"),i(),n(4,"input",50),b("ngModelChange",function(o){m(e);let c=p();return h(c.model.name,o)||(c.model.name=o),g(o)}),C("ngModelChange",function(o){m(e);let c=p();return g(c.onNameChange(o))}),i(),f(5,ye,2,1,"span",51),i(),n(6,"div",52)(7,"label"),a(8,"URL de Entrada / Stream *"),i(),n(9,"input",53),b("ngModelChange",function(o){m(e);let c=p();return h(c.model.input_url,o)||(c.model.input_url=o),g(o)}),i(),f(10,Pe,2,1,"span",51),i(),n(11,"div",54)(12,"label",55)(13,"input",56),b("ngModelChange",function(o){m(e);let c=p();return h(c.model.auto_restart,o)||(c.model.auto_restart=o),g(o)}),i(),_(14,"span",57),a(15," Canal activo (reinicio autom\xE1tico) "),i()()()}if(l&2){let e=p();s(),y("has-error",e.validationErrors().name),s(3),x("ngModel",e.model.name),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().name),s(),y("has-error",e.validationErrors().input_url),s(3),x("ngModel",e.model.input_url),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().input_url),s(3),x("ngModel",e.model.auto_restart),d("disabled",e.currentStatus()==="running")}}function we(l,t){if(l&1&&(n(0,"div",62)(1,"h4",63),_(2,"i",64),a(3," Estad\xEDsticas de FFmpeg "),i(),n(4,"div",65)(5,"div",66)(6,"span",67),a(7,"Frame"),i(),n(8,"span",68),a(9),i()(),n(10,"div",66)(11,"span",67),a(12,"FPS"),i(),n(13,"span",68),a(14),D(15,"number"),i()(),n(16,"div",66)(17,"span",67),a(18,"Tiempo"),i(),n(19,"span",68),a(20),i()(),n(21,"div",66)(22,"span",67),a(23,"Bitrate Total"),i(),n(24,"span",68),a(25),i()(),n(26,"div",66)(27,"span",67),a(28,"Velocidad"),i(),n(29,"span",68),a(30),D(31,"number"),i()(),n(32,"div",69)(33,"span",67),a(34,"\xDAltima Actualizaci\xF3n"),i(),n(35,"span",68),a(36),D(37,"date"),i()()()()),l&2){let e=p().ngIf;s(9),u(e.process.ffmpegStats.frame||"---"),s(5),u(e.process.ffmpegStats.fps?T(15,6,e.process.ffmpegStats.fps,"1.2-2"):"---"),s(6),u(e.process.ffmpegStats.timeFormatted||"---"),s(5),u(e.process.ffmpegStats.bitrateFormatted||"---"),s(5),u(e.process.ffmpegStats.speed?T(31,9,e.process.ffmpegStats.speed,"1.2-2")+"x":"---"),s(6),u(e.process.ffmpegStats.timestamp?T(37,12,e.process.ffmpegStats.timestamp,"short"):"---")}}function Ee(l,t){if(l&1&&(n(0,"div",62)(1,"h4",63),_(2,"i",70),a(3," Informaci\xF3n del Sistema "),i(),n(4,"div",65)(5,"div",66)(6,"span",67),a(7,"PID"),i(),n(8,"span",68),a(9),i()(),n(10,"div",66)(11,"span",67),a(12,"Tiempo Transcurrido"),i(),n(13,"span",68),a(14),i()(),n(15,"div",66)(16,"span",67),a(17,"CPU"),i(),n(18,"span",71),a(19),D(20,"number"),i()(),n(21,"div",66)(22,"span",67),a(23,"Memoria"),i(),n(24,"span",72),a(25),D(26,"number"),i()(),n(27,"div",69)(28,"span",67),a(29,"Comando"),i(),n(30,"code",73),a(31),i()()()()),l&2){let e=p().ngIf;s(9),u(e.process.systemInfo.pid||"---"),s(5),u(e.process.systemInfo.elapsedTime||"---"),s(5),u(e.process.systemInfo.cpuPercent?T(20,5,e.process.systemInfo.cpuPercent,"1.1-1")+"%":"---"),s(6),u(e.process.systemInfo.memoryPercent?T(26,8,e.process.systemInfo.memoryPercent,"1.1-1")+"%":"---"),s(6),u(e.process.systemInfo.command||"---")}}function ke(l,t){if(l&1&&(n(0,"div",62)(1,"h4",63),_(2,"i",74),a(3," Red "),i(),n(4,"div",65)(5,"div",66)(6,"span",67),a(7,"Bytes Recibidos"),i(),n(8,"span",68),a(9),i()(),n(10,"div",66)(11,"span",67),a(12,"Bytes Enviados"),i(),n(13,"span",68),a(14),i()(),n(15,"div",66)(16,"span",67),a(17,"Total Bytes"),i(),n(18,"span",68),a(19),i()(),n(20,"div",66)(21,"span",67),a(22,"Velocidad Descarga"),i(),n(23,"span",75),a(24),i()(),n(25,"div",66)(26,"span",67),a(27,"Velocidad Subida"),i(),n(28,"span",76),a(29),i()(),n(30,"div",66)(31,"span",67),a(32,"Conexiones Activas"),i(),n(33,"span",68),a(34),i()()()()),l&2){let e=p().ngIf;s(9),u(e.process.systemInfo.network.rxBytesFormatted||"---"),s(5),u(e.process.systemInfo.network.txBytesFormatted||"---"),s(5),u(e.process.systemInfo.network.totalBytesFormatted||"---"),s(5),u(e.process.systemInfo.network.rxRate||"---"),s(5),u(e.process.systemInfo.network.txRate||"---"),s(5),u(e.process.systemInfo.network.activeConnections||"---")}}function Ie(l,t){if(l&1&&(n(0,"div",62)(1,"h4",63),_(2,"i",77),a(3," Informaci\xF3n del Canal "),i(),n(4,"div",65)(5,"div",66)(6,"span",67),a(7,"Estado"),i(),n(8,"span",68),a(9),i()(),n(10,"div",66)(11,"span",67),a(12,"PID"),i(),n(13,"span",68),a(14),i()(),n(15,"div",66)(16,"span",67),a(17,"Auto Reinicio"),i(),n(18,"span",68),a(19),i()(),n(20,"div",69)(21,"span",67),a(22,"URL de Entrada"),i(),n(23,"code",68),a(24),i()()()()),l&2){let e=p().ngIf;s(8),N(e.channel.status),s(),P(" ",e.channel.status==="running"?"En Ejecuci\xF3n":e.channel.status==="stopped"?"Detenido":e.channel.status==="restarting"?"Reiniciando":e.channel.status==="error"?"Error":"Desconocido"," "),s(5),u(e.channel.pid||"---"),s(5),u(e.channel.auto_restart?"S\xED":"No"),s(5),u(e.channel.input_url||"---")}}function De(l,t){if(l&1&&(n(0,"div"),f(1,we,38,15,"div",61)(2,Ee,32,11,"div",61)(3,ke,35,6,"div",61)(4,Ie,25,6,"div",61),i()),l&2){let e=t.ngIf;s(),d("ngIf",e.process==null?null:e.process.ffmpegStats),s(),d("ngIf",e.process==null?null:e.process.systemInfo),s(),d("ngIf",e.process==null||e.process.systemInfo==null?null:e.process.systemInfo.network),s(),d("ngIf",e.channel)}}function Te(l,t){l&1&&(n(0,"div",78),_(1,"i",19),n(2,"p"),a(3,"No hay estad\xEDsticas disponibles en este momento."),i(),n(4,"small"),a(5,"Las estad\xEDsticas aparecer\xE1n cuando el canal est\xE9 en ejecuci\xF3n."),i()())}function Ve(l,t){if(l&1&&(n(0,"div",59),f(1,De,5,4,"div",60)(2,Te,6,0,"ng-template",null,1,J),i()),l&2){let e=j(3),r=p();s(),d("ngIf",r.getChannelStats())("ngIfElse",e)}}function Ae(l,t){if(l&1){let e=v();n(0,"button",21),C("click",function(){m(e);let o=p();return g(o.activeTab="logs")}),_(1,"i",79),a(2," Logs "),i()}if(l&2){let e=p();y("active",e.activeTab==="logs")}}function Fe(l,t){if(l&1&&(n(0,"option",131),a(1),i()),l&2){let e=t.$implicit;d("value",e.stream_index.toString()),s(),X(" Pista ",e.index," - ",e.codec," (",e.bitrate,", ",e.channels,"ch",e.language?", "+e.language:"","",e.title?" - "+e.title:" - \xCDndice "+e.stream_index,") ")}}function Ne(l,t){l&1&&_(0,"i",132)}function Le(l,t){l&1&&(n(0,"small",133),a(1,' Haz clic en "Analizar" para cargar las pistas de audio disponibles del stream. '),i())}function Ue(l,t){if(l&1&&(n(0,"small",133),a(1),i()),l&2){let e=p(3);s(),P(" ",e.audioTracks().length," pista(s) de audio disponible(s). ")}}function We(l,t){if(l&1&&(n(0,"option",131),a(1),i()),l&2){let e=t.$implicit;d("value",e.index.toString()),s(),Z(" ",e.name," (\xCDndice: ",e.index,"",e.device?", "+e.device:"",") ")}}function ze(l,t){l&1&&_(0,"i",132)}function Be(l,t){l&1&&(n(0,"small",133),a(1," No hay GPUs compatibles disponibles para este codec. "),i())}function Ge(l,t){if(l&1&&(n(0,"small",133),a(1),i()),l&2){let e=p(4);s(),P(" ",e.compatibleGPUs().length," GPU(s) compatible(s) disponible(s). ")}}function Re(l,t){if(l&1){let e=v();n(0,"div",49)(1,"label"),a(2,"Tarjeta de Video (GPU)"),i(),n(3,"div",104)(4,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.gpu_index,o)||(c.ffmpegSimple.gpu_index=o),g(o)}),n(5,"option",105),a(6,"Autom\xE1tico (GPU por defecto)"),i(),f(7,We,2,4,"option",106),i(),n(8,"button",107),C("click",function(){m(e);let o=p(3);return g(o.loadGPUs())}),f(9,ze,1,0,"i",108),a(10),i()(),f(11,Be,2,0,"small",109)(12,Ge,2,1,"small",109),i()}if(l&2){let e=p(3);s(4),x("ngModel",e.ffmpegSimple.gpu_index),d("disabled",e.currentStatus()==="running"||e.isLoadingGPUs()),s(3),d("ngForOf",e.compatibleGPUs()),s(),d("disabled",e.isLoadingGPUs()||e.currentStatus()==="running"),s(),d("ngIf",e.isLoadingGPUs()),s(),P(" ",e.isLoadingGPUs()?"Detectando...":"Detectar"," "),s(),d("ngIf",e.compatibleGPUs().length===0&&!e.isLoadingGPUs()),s(),d("ngIf",e.compatibleGPUs().length>0)}}function je(l,t){if(l&1){let e=v();n(0,"div",49)(1,"label"),a(2,"Preset de Compresi\xF3n"),i(),n(3,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.preset,o)||(c.ffmpegSimple.preset=o),g(o)}),n(4,"option",134),a(5,"Ultrafast (Bajo CPU)"),i(),n(6,"option",135),a(7,"Superfast"),i(),n(8,"option",136),a(9,"Veryfast (Recomendado)"),i(),n(10,"option",137),a(11,"Faster"),i(),n(12,"option",138),a(13,"Fast"),i(),n(14,"option",139),a(15,"Medium"),i(),n(16,"option",140),a(17,"Slow"),i(),n(18,"option",141),a(19,"Slower"),i(),n(20,"option",142),a(21,"Veryslow (Mejor calidad)"),i()()()}if(l&2){let e=p(3);s(3),x("ngModel",e.ffmpegSimple.preset),d("disabled",e.currentStatus()==="running")}}function Je(l,t){if(l&1){let e=v();n(0,"div",49)(1,"label"),a(2,"Tune"),i(),n(3,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.tune,o)||(c.ffmpegSimple.tune=o),g(o)}),n(4,"option",105),a(5,"Ninguno"),i(),n(6,"option",143),a(7,"Film"),i(),n(8,"option",144),a(9,"Animation"),i(),n(10,"option",145),a(11,"Grain"),i(),n(12,"option",146),a(13,"Stillimage"),i(),n(14,"option",147),a(15,"PSNR"),i(),n(16,"option",148),a(17,"SSIM"),i(),n(18,"option",149),a(19,"Fastdecode"),i(),n(20,"option",150),a(21,"Zerolatency"),i()()()}if(l&2){let e=p(3);s(3),x("ngModel",e.ffmpegSimple.tune),d("disabled",e.currentStatus()==="running")}}function He(l,t){if(l&1){let e=v();n(0,"div",49)(1,"label"),a(2,"Profile"),i(),n(3,"select",86),b("ngModelChange",function(o){m(e);let c=p(3);return h(c.ffmpegSimple.profile,o)||(c.ffmpegSimple.profile=o),g(o)}),n(4,"option",105),a(5,"Auto"),i(),n(6,"option",151),a(7,"Baseline"),i(),n(8,"option",152),a(9,"Main"),i(),n(10,"option",153),a(11,"High"),i()()()}if(l&2){let e=p(3);s(3),x("ngModel",e.ffmpegSimple.profile),d("disabled",e.currentStatus()==="running")}}function qe(l,t){if(l&1){let e=v();n(0,"div",154)(1,"input",155),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.key,o)||(c.key=o),g(o)}),i(),n(2,"input",156),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.value,o)||(c.value=o),g(o)}),i(),n(3,"button",157),C("click",function(){let o=m(e).index,c=p(3);return g(c.removeInputOption(o))}),a(4,"\xD7"),i()()}if(l&2){let e=t.$implicit,r=p(3);s(),x("ngModel",e.key),d("disabled",r.currentStatus()==="running"),s(),x("ngModel",e.value),d("disabled",r.currentStatus()==="running"),s(),d("disabled",r.currentStatus()==="running")}}function Ye(l,t){if(l&1){let e=v();n(0,"div",85)(1,"div",49)(2,"label"),a(3,"Video Codec"),i(),n(4,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.video_codec,o)||(c.ffmpegSimple.video_codec=o),g(o)}),C("ngModelChange",function(){m(e);let o=p(2);return g(o.validateSelectedGPU())}),n(5,"option",87),a(6,"Copiar (Sin transcodificar)"),i(),n(7,"optgroup",88)(8,"option",89),a(9,"H.264 (libx264)"),i(),n(10,"option",90),a(11,"H.265 (libx265)"),i(),n(12,"option",91),a(13,"MPEG-2 Video"),i()(),n(14,"optgroup",92)(15,"option",93),a(16,"H.264 NVENC (NVIDIA)"),i(),n(17,"option",94),a(18,"HEVC NVENC (NVIDIA)"),i(),n(19,"option",95),a(20,"H.264 VAAPI (Intel/AMD)"),i(),n(21,"option",96),a(22,"HEVC VAAPI (Intel/AMD)"),i(),n(23,"option",97),a(24,"H.264 QSV (Intel)"),i(),n(25,"option",98),a(26,"HEVC QSV (Intel)"),i(),n(27,"option",99),a(28,"H.264 VideoToolbox (macOS)"),i(),n(29,"option",100),a(30,"HEVC VideoToolbox (macOS)"),i()()()(),n(31,"div",49)(32,"label"),a(33,"Audio Codec"),i(),n(34,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.audio_codec,o)||(c.ffmpegSimple.audio_codec=o),g(o)}),n(35,"option",87),a(36,"Copiar (Sin transcodificar)"),i(),n(37,"option",101),a(38,"AAC"),i(),n(39,"option",102),a(40,"AC3"),i(),n(41,"option",103),a(42,"MP3"),i()()(),n(43,"div",49)(44,"label"),a(45,"Pista de Audio (audio_stream_index)"),i(),n(46,"div",104)(47,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.audio_stream_index,o)||(c.ffmpegSimple.audio_stream_index=o),g(o)}),n(48,"option",105),a(49,"Autom\xE1tico (Primera pista disponible)"),i(),f(50,Fe,2,7,"option",106),i(),n(51,"button",107),C("click",function(){m(e);let o=p(2);return g(o.analyzeAudioTracks())}),f(52,Ne,1,0,"i",108),a(53),i()(),f(54,Le,2,0,"small",109)(55,Ue,2,1,"small",109),i(),n(56,"div",49)(57,"label"),a(58,"Bitrate Video (Ej: 2M, 500k)"),i(),n(59,"input",110),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.video_bitrate,o)||(c.ffmpegSimple.video_bitrate=o),g(o)}),i()(),n(60,"div",49)(61,"label"),a(62,"Bitrate Audio (Ej: 128k, 192k)"),i(),n(63,"input",110),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.audio_bitrate,o)||(c.ffmpegSimple.audio_bitrate=o),g(o)}),i()(),n(64,"div",49)(65,"label"),a(66,"Resoluci\xF3n"),i(),n(67,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.resolution,o)||(c.ffmpegSimple.resolution=o),g(o)}),n(68,"option",111),a(69,"Original"),i(),n(70,"option",112),a(71,"1080p (1920x1080)"),i(),n(72,"option",113),a(73,"720p (1280x720)"),i(),n(74,"option",114),a(75,"480p (854x480)"),i(),n(76,"option",115),a(77,"360p (640x360)"),i()()(),f(78,Re,13,8,"div",116)(79,je,22,2,"div",116)(80,Je,22,2,"div",116)(81,He,12,2,"div",116),n(82,"div",49)(83,"label"),a(84,"GOP (G)"),i(),n(85,"input",117),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.g,o)||(c.ffmpegSimple.g=o),g(o)}),i()(),n(86,"div",49)(87,"label"),a(88,"Vsync"),i(),n(89,"select",86),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.vsync,o)||(c.ffmpegSimple.vsync=o),g(o)}),n(90,"option",105),a(91,"Auto"),i(),n(92,"option",118),a(93,"0 (Passthrough)"),i(),n(94,"option",119),a(95,"1 (CFR)"),i(),n(96,"option",120),a(97,"2 (VFR)"),i(),n(98,"option",121),a(99,"Drop"),i(),n(100,"option",122),a(101,"CFR"),i(),n(102,"option",123),a(103,"VFR"),i()()(),n(104,"div",52)(105,"label"),a(106,"Fflags (FFmpeg)"),i(),n(107,"input",124),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegSimple.fflags,o)||(c.ffmpegSimple.fflags=o),g(o)}),i()(),n(108,"div",125)(109,"div",126)(110,"label"),a(111,"Input Options (FFmpeg Global)"),i(),n(112,"button",127),C("click",function(){m(e);let o=p(2);return g(o.addInputOption())}),_(113,"i",128),a(114," A\xF1adir "),i()(),n(115,"div",129),f(116,qe,5,5,"div",130),i()()()}if(l&2){let e=p(2);s(4),x("ngModel",e.ffmpegSimple.video_codec),d("disabled",e.currentStatus()==="running"),s(30),x("ngModel",e.ffmpegSimple.audio_codec),d("disabled",e.currentStatus()==="running"),s(13),x("ngModel",e.ffmpegSimple.audio_stream_index),d("disabled",e.currentStatus()==="running"||e.isAnalyzingAudio()),s(3),d("ngForOf",e.audioTracks()),s(),d("disabled",e.isAnalyzingAudio()||e.currentStatus()==="running"||!e.model.input_url),s(),d("ngIf",e.isAnalyzingAudio()),s(),P(" ",e.isAnalyzingAudio()?"Analizando...":"Analizar"," "),s(),d("ngIf",e.audioTracks().length===0&&!e.isAnalyzingAudio()),s(),d("ngIf",e.audioTracks().length>0),s(4),x("ngModel",e.ffmpegSimple.video_bitrate),d("disabled",e.currentStatus()==="running"),s(4),x("ngModel",e.ffmpegSimple.audio_bitrate),d("disabled",e.currentStatus()==="running"),s(4),x("ngModel",e.ffmpegSimple.resolution),d("disabled",e.currentStatus()==="running"),s(11),d("ngIf",e.compatibleGPUs().length>0),s(),d("ngIf",e.ffmpegSimple.video_codec.includes("x26")),s(),d("ngIf",e.ffmpegSimple.video_codec.includes("x26")),s(),d("ngIf",e.ffmpegSimple.video_codec.includes("x26")),s(4),x("ngModel",e.ffmpegSimple.g),d("disabled",e.currentStatus()==="running"),s(4),x("ngModel",e.ffmpegSimple.vsync),d("disabled",e.currentStatus()==="running"),s(18),x("ngModel",e.ffmpegSimple.fflags),d("disabled",e.currentStatus()==="running"),s(5),d("disabled",e.currentStatus()==="running"),s(4),d("ngForOf",e.ffmpegSimple.input_options)}}function Ke(l,t){if(l&1&&(n(0,"span",58),a(1),i()),l&2){let e=p(3);s(),u(e.validationErrors().ffmpeg_params)}}function Qe(l,t){if(l&1){let e=v();n(0,"div",158)(1,"div",159),a(2,'Usa "additional_params" para flags directos de FFmpeg (ej: "-tune zerolatency").'),i(),n(3,"textarea",160),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.ffmpegParamsStr,o)||(c.ffmpegParamsStr=o),g(o)}),i(),f(4,Ke,2,1,"span",51),i()}if(l&2){let e=p(2);y("has-error",e.validationErrors().ffmpeg_params),s(3),x("ngModel",e.ffmpegParamsStr),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().ffmpeg_params)}}function Ze(l,t){if(l&1){let e=v();n(0,"div",80)(1,"div",81)(2,"p"),a(3,"Configuraci\xF3n de FFmpeg para procesamiento de video y audio."),i(),n(4,"button",82),C("click",function(){m(e);let o=p();return g(o.toggleFfmpegExpertMode())}),a(5),i()(),f(6,Ye,117,30,"div",83)(7,Qe,5,5,"div",84),i()}if(l&2){let e=p();s(5),P(" ",e.isFfmpegExpertMode()?"\u2728 Editor Simple":"\u{1F6E0}\uFE0F Modo Experto"," "),s(),d("ngIf",!e.isFfmpegExpertMode()),s(),d("ngIf",e.isFfmpegExpertMode())}}function Xe(l,t){if(l&1){let e=v();n(0,"input",175),b("ngModelChange",function(o){m(e);let c=p().$implicit;return h(c.host,o)||(c.host=o),g(o)}),i()}if(l&2){let e=p().$implicit,r=p(3);x("ngModel",e.host),d("disabled",r.currentStatus()==="running")}}function $e(l,t){if(l&1){let e=v();n(0,"input",176),b("ngModelChange",function(o){m(e);let c=p().$implicit;return h(c.port,o)||(c.port=o),g(o)}),i()}if(l&2){let e=p().$implicit,r=p(3);x("ngModel",e.port),d("disabled",r.currentStatus()==="running")}}function et(l,t){if(l&1){let e=v();n(0,"input",177),b("ngModelChange",function(o){m(e);let c=p().$implicit;return h(c.path,o)||(c.path=o),g(o)}),i()}if(l&2){let e=p().$implicit,r=p(3);x("ngModel",e.path),d("disabled",r.currentStatus()==="running")}}function tt(l,t){if(l&1){let e=v();n(0,"div",167)(1,"div",168)(2,"select",86),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.type,o)||(c.type=o),g(o)}),C("ngModelChange",function(){let o=m(e).$implicit,c=p(3);return g(c.onOutputTypeChange(o))}),n(3,"option",169),a(4,"HLS"),i(),n(5,"option",170),a(6,"UDP"),i()(),f(7,Xe,1,2,"input",171)(8,$e,1,2,"input",172)(9,et,1,2,"input",173),i(),n(10,"button",174),C("click",function(){let o=m(e).index,c=p(3);return g(c.removeOutput(o))}),a(11,"\xD7"),i()()}if(l&2){let e=t.$implicit,r=p(3);s(2),x("ngModel",e.type),d("disabled",r.currentStatus()==="running"),s(5),d("ngIf",e.type==="udp"),s(),d("ngIf",e.type==="udp"),s(),d("ngIf",e.type==="hls"),s(),d("disabled",r.currentStatus()==="running")}}function nt(l,t){if(l&1){let e=v();n(0,"div",164),f(1,tt,12,6,"div",165),n(2,"button",166),C("click",function(){m(e);let o=p(2);return g(o.addOutput())}),a(3,"+ A\xF1adir nueva salida"),i()()}if(l&2){let e=p(2);s(),d("ngForOf",e.outputs())("ngForTrackBy",e.trackByOutput),s(),d("disabled",e.currentStatus()==="running")}}function it(l,t){if(l&1&&(n(0,"span",58),a(1),i()),l&2){let e=p(3);s(),u(e.validationErrors().outputs)}}function ot(l,t){if(l&1){let e=v();n(0,"div",158)(1,"textarea",178),b("ngModelChange",function(o){m(e);let c=p(2);return h(c.outputsStr,o)||(c.outputsStr=o),g(o)}),i(),f(2,it,2,1,"span",51),i()}if(l&2){let e=p(2);y("has-error",e.validationErrors().outputs),s(),x("ngModel",e.outputsStr),d("disabled",e.currentStatus()==="running"),s(),d("ngIf",e.validationErrors().outputs)}}function at(l,t){if(l&1){let e=v();n(0,"div",154)(1,"input",182),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.key,o)||(c.key=o),g(o)}),i(),n(2,"input",183),b("ngModelChange",function(o){let c=m(e).$implicit;return h(c.value,o)||(c.value=o),g(o)}),i(),n(3,"button",157),C("click",function(){let o=m(e).index,c=p(3);return g(c.removeOutputOption(o))}),a(4,"\xD7"),i()()}if(l&2){let e=t.$implicit,r=p(3);s(),x("ngModel",e.key),d("disabled",r.currentStatus()==="running"),s(),x("ngModel",e.value),d("disabled",r.currentStatus()==="running"),s(),d("disabled",r.currentStatus()==="running")}}function rt(l,t){l&1&&(n(0,"div",184),a(1," No hay opciones de salida adicionales definidas. "),i())}function lt(l,t){if(l&1){let e=v();n(0,"div",179)(1,"div",126)(2,"label"),_(3,"i",180),a(4," Par\xE1metros de Salida (Global Output Options)"),i(),n(5,"button",127),C("click",function(){m(e);let o=p(2);return g(o.addOutputOption())}),_(6,"i",128),a(7," A\xF1adir opci\xF3n "),i()(),n(8,"div",129),f(9,at,5,5,"div",130),i(),f(10,rt,2,0,"div",181),i()}if(l&2){let e=p(2);s(5),d("disabled",e.currentStatus()==="running"),s(4),d("ngForOf",e.ffmpegSimple.output_options),s(),d("ngIf",e.ffmpegSimple.output_options.length===0)}}function st(l,t){if(l&1){let e=v();n(0,"div",161)(1,"div",81)(2,"p"),a(3,"Define los puntos de distribuci\xF3n (HLS, UDP)."),i(),n(4,"button",82),C("click",function(){m(e);let o=p();return g(o.toggleExpertMode())}),a(5),i()(),f(6,nt,4,3,"div",162)(7,ot,3,5,"div",84)(8,lt,11,3,"div",163),i()}if(l&2){let e=p();s(5),P(" ",e.isExpertMode()?"\u2728 Editor Simple":"\u{1F6E0}\uFE0F Modo Experto"," "),s(),d("ngIf",!e.isExpertMode()),s(),d("ngIf",e.isExpertMode()),s(),d("ngIf",!e.isExpertMode())}}function ct(l,t){if(l&1&&(n(0,"div",193)(1,"span",194),a(2),D(3,"date"),i(),n(4,"span",195),a(5),i()()),l&2){let e=t.$implicit;N(e.level),s(2),u(T(3,4,e.created_at,"HH:mm:ss")),s(3),u(e.message)}}function dt(l,t){l&1&&(n(0,"div",196),a(1,"No hay logs recientes."),i())}function pt(l,t){if(l&1){let e=v();n(0,"div",185)(1,"div",81)(2,"p"),a(3,"Registro de eventos y depuraci\xF3n en tiempo real."),i(),n(4,"div",186)(5,"button",187),C("click",function(){m(e);let o=p();return g(o.manualRefreshLogs())}),_(6,"i",12),a(7," Actualizar "),i(),n(8,"button",188),C("click",function(){m(e);let o=p();return g(o.clearLogs())}),_(9,"i",189),a(10," Limpiar "),i()()(),n(11,"div",190,2),f(13,ct,6,7,"div",191)(14,dt,2,0,"div",192),i()()}if(l&2){let e=p();s(5),d("disabled",e.isRefreshingLogs()),s(),y("fa-rotate",!e.isRefreshingLogs())("fa-spinner",e.isRefreshingLogs())("fa-spin",e.isRefreshingLogs()),s(2),d("disabled",e.logs().length===0),s(5),d("ngForOf",e.logs()),s(),d("ngIf",e.logs().length===0)}}function mt(l,t){if(l&1&&(n(0,"div",197)(1,"div",81)(2,"p"),a(3,"Representaci\xF3n JSON del canal tal como se enviar\xEDa al backend."),i()(),n(4,"pre",198),a(5),i()()),l&2){let e=p();s(5),u(e.getRawJson())}}function gt(l,t){if(l&1){let e=v();n(0,"button",207),C("click",function(){m(e);let o=p(2);return g(o.start())}),_(1,"i",12),a(2),i()}if(l&2){let e=p(2);d("disabled",e.pendingAction()!==null),s(),y("fa-play",e.pendingAction()!=="start")("fa-spinner",e.pendingAction()==="start")("fa-spin",e.pendingAction()==="start"),s(),P(" ",e.pendingAction()==="start"?"Iniciando...":"Iniciar"," ")}}function ut(l,t){if(l&1){let e=v();n(0,"button",208),C("click",function(){m(e);let o=p(2);return g(o.stop())}),_(1,"i",12),a(2),i()}if(l&2){let e=p(2);d("disabled",e.pendingAction()!==null),s(),y("fa-stop",e.pendingAction()!=="stop")("fa-spinner",e.pendingAction()==="stop")("fa-spin",e.pendingAction()==="stop"),s(),P(" ",e.pendingAction()==="stop"?"Deteniendo...":"Detener"," ")}}function _t(l,t){if(l&1){let e=v();n(0,"div",199)(1,"div",18)(2,"h3"),_(3,"i",200),a(4," Control del Stream"),i()(),n(5,"div",24)(6,"div",201),_(7,"span",202),n(8,"span",8),a(9),i()(),n(10,"div",203),f(11,gt,3,8,"button",204)(12,ut,3,8,"button",205),n(13,"button",206),C("click",function(){m(e);let o=p();return g(o.restart())}),_(14,"i",12),a(15),i()()()()}if(l&2){let e=p();s(6),N(e.currentStatus()),s(3),u(e.getStatusText()),s(2),d("ngIf",e.currentStatus()!=="running"&&e.currentStatus()!=="restarting"),s(),d("ngIf",e.currentStatus()==="running"||e.currentStatus()==="error"||e.currentStatus()==="restarting"),s(),d("disabled",e.pendingAction()!==null),s(),y("fa-rotate",e.pendingAction()!=="restart")("fa-spinner",e.pendingAction()==="restart")("fa-spin",e.pendingAction()==="restart"),s(),P(" ",e.pendingAction()==="restart"?"Reiniciando...":"Reiniciar"," ")}}function ft(l,t){if(l&1){let e=v();n(0,"div",211)(1,"div",212)(2,"span",213),a(3),i(),n(4,"span",214),a(5),i()(),n(6,"div",215)(7,"code",216),a(8),i(),n(9,"button",217),C("click",function(o){let c=m(e).$implicit,O=p(2);return g(O.copyUrl(c.fullUrl,o))}),_(10,"i",218),i()()()}if(l&2){let e=t.$implicit,r=t.index,o=p(2);s(2),N(o.getTypeClass(e.type)),s(),u(e.type),s(2),P("#",r+1),s(3),u(e.fullUrl)}}function Ct(l,t){if(l&1&&(n(0,"div",209),f(1,ft,11,5,"div",210),i()),l&2){let e=p();s(),d("ngForOf",e.getAllOutputUrls())}}function vt(l,t){l&1&&(n(0,"div",219),_(1,"i",19),n(2,"span"),a(3,"No hay URLs de salida disponibles para este canal."),i()())}function xt(l,t){if(l&1){let e=v();n(0,"div",220)(1,"div",18)(2,"h3"),a(3,"Acciones Cr\xEDticas"),i()(),n(4,"div",24)(5,"p"),a(6,"Eliminar este canal detendr\xE1 todas las transmisiones asociadas permanentemente."),i(),n(7,"button",221),C("click",function(){m(e);let o=p();return g(o.delete())}),_(8,"i",222),a(9," Eliminar Canal "),i()()()}}var xe=class l{isNew=!1;activeTab="advanced";basicInfoTab="basic";channel=S(null);logs=S([]);isSaving=S(!1);errorMessage=S(null);successMessage=S(null);isExpertMode=S(!1);isFfmpegExpertMode=S(!1);validationErrors=S({});isRefreshingLogs=S(!1);outputs=S([]);model={name:"",slug:"",input_url:"",auto_restart:!0};ffmpegParamsStr="{}";ffmpegSimple={video_codec:"copy",audio_codec:"copy",video_bitrate:"",audio_bitrate:"",resolution:"original",preset:"veryfast",tune:"",profile:"",g:"",vsync:"",fflags:"",audio_stream_index:"",gpu_index:"",input_options:[],output_options:[]};audioTracks=S([]);isAnalyzingAudio=S(!1);availableGPUs=S([]);isLoadingGPUs=S(!1);ffmpegParamsOther={};outputsStr="[]";channelService=A(ve);dialogService=A(fe);socketService=A(Ce);route=A(oe);router=A(ae);pendingAction=S(null);compatibleGPUs=H(()=>{let t=this.ffmpegSimple.video_codec,e=this.availableGPUs();return!t||t==="copy"?[]:t.includes("nvenc")?e.filter(r=>r.type==="nvenc"&&r.available):t.includes("vaapi")?e.filter(r=>r.type==="vaapi"&&r.available):t.includes("qsv")?e.filter(r=>r.type==="qsv"&&r.available):t.includes("videotoolbox")?e.filter(r=>r.type==="videotoolbox"&&r.available):[]});constructor(){z(()=>{let t=this.currentStatus();this.pendingAction()&&(this.pendingAction()==="start"&&t==="running"||this.pendingAction()==="stop"&&(t==="stopped"||t==="error")||this.pendingAction()==="restart"&&(t==="running"||t==="restarting"))&&this.pendingAction.set(null)}),z(()=>{let t=this.channel()?.id;if(!t)return;let r=this.socketService.allStats().find(o=>{let c=o.channel?.id;return String(c)===String(t)});if(r&&r.channel){let o=this.channel();o&&r.channel.status&&r.channel.status!==o.status&&this.channel.set(I(w({},o),{status:r.channel.status}))}}),z(()=>{let t=this.ffmpegSimple.video_codec,e=this.ffmpegSimple.gpu_index;if(!e||e.trim()==="")return;let r=this.compatibleGPUs(),o=parseInt(e.trim());!isNaN(o)&&r.length>0&&(r.some(O=>O.index===o)||(this.ffmpegSimple.gpu_index=""))})}currentStatus=H(()=>{let t=this.channel()?.id;if(!t)return"stopped";let e=this.channel();if(!e)return"stopped";let r=e.status;if(r==="error")return"error";if(r==="restarting")return"restarting";if(!this.socketService.isConnected())return r==="running"?"running":"stopped";let c=this.socketService.allStats().find(O=>{let E=O.channel?.id;return String(E)===String(t)});if(c){let O=c.channel?.status;return O==="restarting"?"restarting":O==="error"?"error":c.process?.isRunning===!0?"running":"stopped"}return r==="running"?"running":"stopped"});ngOnInit(){let t=this.route.snapshot.paramMap.get("id");this.socketService.subscribeToAll(),this.loadGPUs(),t==="new"?(this.isNew=!0,this.addOutput()):t&&(this.loadChannel(t),this.loadLogs(t),this.socketService.subscribeToChannel(t))}ngOnDestroy(){let t=this.route.snapshot.paramMap.get("id");t&&t!=="new"&&this.socketService.unsubscribeFromChannel(t)}loadChannel(t){this.channelService.getChannel(t).subscribe(e=>{e.slug||(e.slug=this.generateSlug(e.name)),this.channel.set(e),this.model=w({},e),this.ffmpegParamsStr=JSON.stringify(e.ffmpeg_params,null,2),this.syncFfmpegToSimple(e.ffmpeg_params||{}),this.outputsStr=JSON.stringify(e.outputs,null,2),this.outputs.set(JSON.parse(JSON.stringify(e.outputs||[]))),e.input_url&&e.input_url.trim()&&setTimeout(()=>this.analyzeAudioTracks(),300)})}syncFfmpegToSimple(t){let K=t||{},{video_codec:e,audio_codec:r,video_bitrate:o,audio_bitrate:c,resolution:O,preset:E,tune:V,profile:k,g:L,vsync:M,fflags:U,audio_stream_index:F,gpu_index:B,input_options:q,output_options:Y}=K,he=W(K,["video_codec","audio_codec","video_bitrate","audio_bitrate","resolution","preset","tune","profile","g","vsync","fflags","audio_stream_index","gpu_index","input_options","output_options"]);this.ffmpegSimple={video_codec:e||"copy",audio_codec:r||"copy",video_bitrate:o||"",audio_bitrate:c||"",resolution:O||"original",preset:E||"veryfast",tune:V||"",profile:k||"",g:L||"",vsync:M||"",fflags:U||"",audio_stream_index:F!=null?String(F):"",gpu_index:B!=null?String(B):"",input_options:q?Object.entries(q).map(([G,R])=>({key:G,value:String(R)})):[],output_options:Y?Object.entries(Y).map(([G,R])=>({key:G,value:String(R)})):[]},this.ffmpegParamsOther=he}syncFfmpegFromSimple(){let t=I(w({},this.ffmpegParamsOther),{video_codec:this.ffmpegSimple.video_codec,audio_codec:this.ffmpegSimple.audio_codec});if(this.ffmpegSimple.video_bitrate&&(t.video_bitrate=this.ffmpegSimple.video_bitrate),this.ffmpegSimple.audio_bitrate&&(t.audio_bitrate=this.ffmpegSimple.audio_bitrate),this.ffmpegSimple.resolution!=="original"&&(t.resolution=this.ffmpegSimple.resolution),this.ffmpegSimple.video_codec.includes("x26")&&(t.preset=this.ffmpegSimple.preset,this.ffmpegSimple.tune&&(t.tune=this.ffmpegSimple.tune),this.ffmpegSimple.profile&&(t.profile=this.ffmpegSimple.profile)),this.ffmpegSimple.g&&(t.g=this.ffmpegSimple.g),this.ffmpegSimple.vsync&&(t.vsync=this.ffmpegSimple.vsync),this.ffmpegSimple.fflags&&(t.fflags=this.ffmpegSimple.fflags),this.ffmpegSimple.audio_stream_index&&this.ffmpegSimple.audio_stream_index.trim()!==""){let e=parseInt(this.ffmpegSimple.audio_stream_index.trim());isNaN(e)||(t.audio_stream_index=e)}if(this.ffmpegSimple.gpu_index&&this.ffmpegSimple.gpu_index.trim()!==""){let e=parseInt(this.ffmpegSimple.gpu_index.trim());isNaN(e)||(t.gpu_index=e)}return this.ffmpegSimple.input_options.length>0&&(t.input_options={},this.ffmpegSimple.input_options.forEach(e=>{e.key.trim()&&(t.input_options[e.key.trim()]=e.value)})),this.ffmpegSimple.output_options.length>0&&(t.output_options={},this.ffmpegSimple.output_options.forEach(e=>{e.key.trim()&&(t.output_options[e.key.trim()]=e.value)})),t}addInputOption(){this.ffmpegSimple.input_options.push({key:"",value:""})}removeInputOption(t){this.ffmpegSimple.input_options.splice(t,1)}addOutputOption(){this.ffmpegSimple.output_options.push({key:"",value:""})}removeOutputOption(t){this.ffmpegSimple.output_options.splice(t,1)}loadLogs(t){this.channelService.getChannelLogs(t).subscribe({next:e=>{this.logs.set(e.logs),this.isRefreshingLogs.set(!1)},error:()=>this.isRefreshingLogs.set(!1)})}manualRefreshLogs(){let t=this.channel()?.id;t&&(this.isRefreshingLogs.set(!0),this.loadLogs(t))}save(){this.errorMessage.set(null),this.validationErrors.set({});let t={};this.model.name?.trim()||(t.name="El nombre es obligatorio"),this.model.input_url?.trim()||(t.input_url="La URL de entrada es obligatoria");let e={};if(this.isFfmpegExpertMode())try{e=JSON.parse(this.ffmpegParamsStr)}catch{t.ffmpeg_params="Formato JSON inv\xE1lido"}else if(e=this.syncFfmpegFromSimple(),e.gpu_index!==void 0){let M=this.compatibleGPUs();!M.some(F=>F.index===e.gpu_index)&&M.length>0&&(t.ffmpeg_params=`La GPU seleccionada no es compatible con el codec ${e.video_codec}`)}let r=this.isExpertMode()?[]:this.outputs();if(this.isExpertMode())try{r=JSON.parse(this.outputsStr)}catch{t.outputs="Formato JSON de salidas inv\xE1lido"}if(!Array.isArray(r)||r.length===0?t.outputs="Al menos una salida es obligatoria":r.forEach((M,U)=>{M.type==="hls"&&!M.path?.trim()&&this.isNew,M.type==="udp"&&(!M.host?.trim()||!M.port)&&(t.outputs=`La salida UDP #${U+1} requiere Host y Puerto`)}),Object.keys(t).length>0){this.validationErrors.set(t);return}this.isSaving.set(!0);let L=this.model,{outputs:o,slug:c,ffmpeg_params:O}=L,E=W(L,["outputs","slug","ffmpeg_params"]),V=I(w({},E),{slug:this.model.slug,ffmpeg_params:e,outputs:r.map(M=>M.type==="udp"?I(w({},M),{port:Number(M.port)}):M)});(this.isNew?this.channelService.createChannel(V):this.channelService.updateChannel(this.channel().id,V)).subscribe({next:M=>{this.isSaving.set(!1),this.successMessage.set("Canal guardado correctamente."),this.isNew?this.router.navigate(["/channels"]):(this.channel.set(M),this.model=w({},M),this.ffmpegParamsStr=JSON.stringify(M.ffmpeg_params,null,2),this.syncFfmpegToSimple(M.ffmpeg_params),this.outputsStr=JSON.stringify(M.outputs,null,2),this.outputs.set(JSON.parse(JSON.stringify(M.outputs||[]))),setTimeout(()=>this.successMessage.set(null),3e3))},error:M=>{this.isSaving.set(!1),this.errorMessage.set(M.error?.message||"Error al guardar el canal.")}})}onNameChange(t){(this.isNew||!this.channel()?.slug)&&(this.model.slug=this.generateSlug(t))}generateSlug(t){return t.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}toggleFfmpegExpertMode(){if(this.isFfmpegExpertMode())try{let t=JSON.parse(this.ffmpegParamsStr);this.syncFfmpegToSimple(t),this.isFfmpegExpertMode.set(!1)}catch{confirm("JSON inv\xE1lido. \xBFPerder cambios?")&&this.isFfmpegExpertMode.set(!1)}else this.ffmpegParamsStr=JSON.stringify(this.syncFfmpegFromSimple(),null,2),this.isFfmpegExpertMode.set(!0)}toggleExpertMode(){if(this.isExpertMode())try{this.outputs.set(JSON.parse(this.outputsStr)),this.isExpertMode.set(!1)}catch{confirm("JSON de salidas inv\xE1lido. \xBFPerder cambios?")&&this.isExpertMode.set(!1)}else this.outputsStr=JSON.stringify(this.outputs(),null,2),this.isExpertMode.set(!0)}addOutput(){this.outputs.update(t=>[...t,{type:"hls",path:""}])}onOutputTypeChange(t){t.type==="hls"?(delete t.host,delete t.port):(delete t.path,t.host="",t.port=5e3)}removeOutput(t){this.outputs.update(e=>e.filter((r,o)=>o!==t))}trackByOutput(t,e){return`${t}-${e.type}`}async delete(){await this.dialogService.confirm({title:"Eliminar Canal",message:"\xBFEst\xE1s seguro de que deseas eliminar este canal? Esta acci\xF3n es irreversible.",type:"danger"})&&this.channelService.deleteChannel(this.channel().id).subscribe(()=>this.router.navigate(["/channels"]))}async clearLogs(){let t=this.channel()?.id;if(!t)return;await this.dialogService.confirm({title:"Limpiar Logs",message:"\xBFEst\xE1s seguro de que deseas limpiar todos los logs de este canal?",type:"danger"})&&this.channelService.clearChannelLogs(t).subscribe({next:()=>this.logs.set([]),error:r=>console.error("Error clearing logs:",r)})}start(){let t=this.channel()?.id;t&&(this.pendingAction.set("start"),this.channelService.startChannel(t).subscribe({next:()=>{setTimeout(()=>{this.pendingAction()==="start"&&this.pendingAction.set(null)},5e3)},error:()=>this.pendingAction.set(null)}))}stop(){let t=this.channel()?.id;t&&(this.pendingAction.set("stop"),this.channelService.stopChannel(t).subscribe({next:()=>{setTimeout(()=>{this.pendingAction()==="stop"&&this.pendingAction.set(null)},5e3)},error:()=>this.pendingAction.set(null)}))}restart(){let t=this.channel()?.id;t&&(this.pendingAction.set("restart"),this.channelService.restartChannel(t).subscribe({next:()=>{setTimeout(()=>{this.pendingAction()==="restart"&&this.pendingAction.set(null)},5e3)},error:()=>this.pendingAction.set(null)}))}getPrimaryOutputUrl(){let t=this.channel();if(!t)return"Generando...";if(t.urlOutputs){if(t.urlOutputs.hls&&t.urlOutputs.hls.length>0)return t.urlOutputs.hls[0].fullUrl;if(t.urlOutputs.udp&&t.urlOutputs.udp.length>0)return t.urlOutputs.udp[0].fullUrl;if(t.urlOutputs.dvb&&t.urlOutputs.dvb.length>0)return t.urlOutputs.dvb[0].fullUrl;if(t.urlOutputs.file&&t.urlOutputs.file.length>0)return t.urlOutputs.file[0].fullUrl}if(!t.outputs||t.outputs.length===0)return"Sin salida";let e=t.outputs.find(c=>c.type==="hls")||t.outputs[0],r=t.slug||this.generateSlug(t.name),o=re.apiUrl.replace("/api","");return e.type==="hls"?`${o}/media/${r}/index.m3u8`:e.type==="udp"?e.host&&e.port?`udp://${e.host}:${e.port}`:e.url||"udp://...":"URL no disponible"}getAllOutputUrls(){let t=this.channel();if(!t||!t.urlOutputs)return[];let e=[];return t.urlOutputs.hls&&t.urlOutputs.hls.forEach(r=>{e.push({type:"HLS",fullUrl:r.fullUrl})}),t.urlOutputs.udp&&t.urlOutputs.udp.forEach(r=>{e.push({type:"UDP",fullUrl:r.fullUrl})}),t.urlOutputs.dvb&&t.urlOutputs.dvb.forEach(r=>{e.push({type:"DVB",fullUrl:r.fullUrl})}),t.urlOutputs.file&&t.urlOutputs.file.forEach(r=>{e.push({type:"File",fullUrl:r.fullUrl})}),e}getTypeClass(t){return t.toLowerCase()}async copyToClipboard(t){if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(t),!0}catch(e){console.warn("Clipboard API failed, trying fallback:",e)}try{let e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();let r=document.execCommand("copy");return document.body.removeChild(e),r}catch(e){return console.error("Fallback copy failed:",e),!1}}copyUrl(t,e){e.stopPropagation(),!(t==="Generando..."||t==="Sin salida"||t==="URL no disponible")&&this.copyToClipboard(t).then(r=>{if(r){let o=e.currentTarget,c=o.innerHTML;o.innerHTML='<i class="fa-solid fa-check"></i>',setTimeout(()=>{o.innerHTML=c},2e3)}})}getRawJson(){try{let e={};this.isFfmpegExpertMode()?e=JSON.parse(this.ffmpegParamsStr||"{}"):e=this.syncFfmpegFromSimple();let r=[];this.isExpertMode()?r=JSON.parse(this.outputsStr||"[]"):r=this.outputs();let t=this.model,{outputs:o,slug:c,ffmpeg_params:O}=t,E=W(t,["outputs","slug","ffmpeg_params"]),V=I(w({},E),{slug:this.model.slug,ffmpeg_params:e,outputs:r.map(k=>k.type==="udp"?I(w({},k),{port:Number(k.port)}):k)});return JSON.stringify(V,null,2)}catch{return"JSON inv\xE1lido en los editores expertos."}}getStatusText(){switch(this.currentStatus()){case"running":return"En ejecuci\xF3n";case"error":return"Error";case"restarting":return"Reiniciando";default:return"Detenido"}}analyzeAudioTracks(){let t=this.model.input_url?.trim();if(!t){this.errorMessage.set("Por favor, ingresa una URL de entrada primero.");return}this.isAnalyzingAudio.set(!0),this.errorMessage.set(null),this.audioTracks.set([]),this.channelService.analyzeAudio(t).subscribe({next:e=>{if(this.isAnalyzingAudio.set(!1),e.audio_tracks&&e.audio_tracks.tracks)if(this.audioTracks.set(e.audio_tracks.tracks),e.audio_tracks.tracks.length===0)this.errorMessage.set("No se encontraron pistas de audio en el stream.");else{let r=this.ffmpegSimple.audio_stream_index;r&&r.trim()!==""&&(e.audio_tracks.tracks.some(c=>String(c.stream_index)===r.trim())||(this.ffmpegSimple.audio_stream_index=""))}else this.errorMessage.set("No se pudieron obtener las pistas de audio.")},error:e=>{this.isAnalyzingAudio.set(!1),this.errorMessage.set(e.error?.message||"Error al analizar las pistas de audio.")}})}loadGPUs(){this.isLoadingGPUs.set(!0),this.channelService.getGPUs().subscribe({next:t=>{this.isLoadingGPUs.set(!1),t.gpus&&Array.isArray(t.gpus)&&(this.availableGPUs.set(t.gpus),this.validateSelectedGPU())},error:t=>{this.isLoadingGPUs.set(!1),console.error("Error obteniendo GPUs:",t),this.availableGPUs.set([])}})}validateSelectedGPU(){let t=this.ffmpegSimple.gpu_index;if(!t||t.trim()==="")return;let e=this.compatibleGPUs(),r=parseInt(t.trim());isNaN(r)||e.some(c=>c.index===r)||(this.ffmpegSimple.gpu_index="")}getChannelStats(){let t=this.channel()?.id;return t&&this.socketService.allStats().find(o=>{let c=o.channel?.id;return String(c)===String(t)})||null}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=Q({type:l,selectors:[["app-channel-detail"]],decls:60,vars:32,consts:[["noOutputs",""],["noStats",""],["logsRef",""],[1,"detail-container"],[1,"header-section"],[1,"title-area"],[1,"btn-back",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"text"],[1,"subtitle"],[1,"header-actions"],[1,"btn-primary","main-save",3,"click","disabled"],[1,"fa-solid"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"detail-grid"],[1,"main-form"],[1,"premium-card"],[1,"card-header"],[1,"fa-solid","fa-circle-info"],[1,"card-tabs","basic-tabs"],[3,"click"],[1,"fa-solid","fa-edit"],[3,"active","click",4,"ngIf"],[1,"card-body"],["class","form-grid",4,"ngIf"],["class","stats-view",4,"ngIf"],[1,"premium-card","config-card"],[1,"card-tabs"],[1,"fa-solid","fa-sliders"],[1,"fa-solid","fa-share-nodes"],[1,"fa-solid","fa-bug"],[1,"card-body","tab-content-area"],["class","advanced-section",4,"ngIf"],["class","outputs-section",4,"ngIf"],["class","logs-section",4,"ngIf"],["class","debug-section",4,"ngIf"],[1,"side-panel"],["class","premium-card control-card",4,"ngIf"],[1,"fa-solid","fa-link"],["class","outputs-list-container",4,"ngIf","ngIfElse"],["class","premium-card danger-card",4,"ngIf"],[1,"alert","alert-danger"],[1,"fa-solid","fa-circle-exclamation"],[1,"close-alert",3,"click"],[1,"alert","alert-success"],[1,"fa-solid","fa-circle-check"],[1,"fa-solid","fa-chart-line"],[1,"form-grid"],[1,"form-group"],["type","text","placeholder","Ej: Canal Premium HD",3,"ngModelChange","ngModel","disabled"],["class","error-text",4,"ngIf"],[1,"form-group","full-width"],["type","text","placeholder","udp://@239.1.1.1:5000",3,"ngModelChange","ngModel","disabled"],[1,"form-group","full-width","checkbox-row"],[1,"checkbox-container"],["type","checkbox","id","auto_restart",3,"ngModelChange","ngModel","disabled"],[1,"checkmark"],[1,"error-text"],[1,"stats-view"],[4,"ngIf","ngIfElse"],["class","stats-section",4,"ngIf"],[1,"stats-section"],[1,"stats-section-title"],[1,"fa-solid","fa-video"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"stat-item","full-width"],[1,"fa-solid","fa-microchip"],[1,"stat-value","cpu"],[1,"stat-value","memory"],[1,"stat-value","command"],[1,"fa-solid","fa-network-wired"],[1,"stat-value","net-in"],[1,"stat-value","net-out"],[1,"fa-solid","fa-info-circle"],[1,"no-stats-message"],[1,"fa-solid","fa-terminal"],[1,"advanced-section"],[1,"section-subheader"],[1,"btn-outline-small",3,"click"],["class","ffmpeg-simple-grid",4,"ngIf"],["class","json-editor",3,"has-error",4,"ngIf"],[1,"ffmpeg-simple-grid"],[3,"ngModelChange","ngModel","disabled"],["value","copy"],["label","Software"],["value","libx264"],["value","libx265"],["value","mpeg2video"],["label","Hardware Acceleration"],["value","h264_nvenc"],["value","hevc_nvenc"],["value","h264_vaapi"],["value","hevc_vaapi"],["value","h264_qsv"],["value","hevc_qsv"],["value","h264_videotoolbox"],["value","hevc_videotoolbox"],["value","aac"],["value","ac3"],["value","mp3"],[1,"audio-track-selector"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn-analyze-audio",3,"click","disabled"],["class","fa-solid fa-spinner fa-spin",4,"ngIf"],["class","field-hint",4,"ngIf"],["type","text","placeholder","Original",3,"ngModelChange","ngModel","disabled"],["value","original"],["value","1920x1080"],["value","1280x720"],["value","854x480"],["value","640x360"],["class","form-group",4,"ngIf"],["type","text","placeholder","Ej: 50",3,"ngModelChange","ngModel","disabled"],["value","0"],["value","1"],["value","2"],["value","drop"],["value","cfr"],["value","vfr"],["type","text","placeholder","+genpts+discardcorrupt",3,"ngModelChange","ngModel","disabled"],[1,"options-container","full-width"],[1,"options-header"],["type","button",1,"btn-add-mini",3,"click","disabled"],[1,"fa-solid","fa-plus"],[1,"options-list"],["class","option-item",4,"ngFor","ngForOf"],[3,"value"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"field-hint"],["value","ultrafast"],["value","superfast"],["value","veryfast"],["value","faster"],["value","fast"],["value","medium"],["value","slow"],["value","slower"],["value","veryslow"],["value","film"],["value","animation"],["value","grain"],["value","stillimage"],["value","psnr"],["value","ssim"],["value","fastdecode"],["value","zerolatency"],["value","baseline"],["value","main"],["value","high"],[1,"option-item"],["type","text","placeholder","Key (ej: reconnect)",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Value (ej: 1)",3,"ngModelChange","ngModel","disabled"],["type","button",1,"btn-remove-mini",3,"click","disabled"],[1,"json-editor"],[1,"json-hint"],["rows","10","placeholder",'{ "video_codec": "libx264", "additional_params": "-tune zerolatency" }',3,"ngModelChange","ngModel","disabled"],[1,"outputs-section"],["class","outputs-list",4,"ngIf"],["class","options-container global-output-options",4,"ngIf"],[1,"outputs-list"],["class","output-item-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-add-item",3,"click","disabled"],[1,"output-item-row"],[1,"row-fields"],["value","hls"],["value","udp"],["type","text","placeholder","IP/Host",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["type","number","placeholder","Puerto",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["type","text","placeholder","Ruta (Opcional)","class","full-row",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"btn-icon-danger",3,"click","disabled"],["type","text","placeholder","IP/Host",3,"ngModelChange","ngModel","disabled"],["type","number","placeholder","Puerto",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Ruta (Opcional)",1,"full-row",3,"ngModelChange","ngModel","disabled"],["rows","8","placeholder",'[ { "type": "hls", "path": "/..." } ]',3,"ngModelChange","ngModel","disabled"],[1,"options-container","global-output-options"],[1,"fa-solid","fa-gears"],["class","options-hint",4,"ngIf"],["type","text","placeholder","Key (ej: movflags)",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Value (ej: faststart)",3,"ngModelChange","ngModel","disabled"],[1,"options-hint"],[1,"logs-section"],[1,"subheader-actions"],[1,"btn-outline-small",3,"click","disabled"],[1,"btn-outline-small","btn-danger-subtle",3,"click","disabled"],[1,"fa-solid","fa-trash-can"],[1,"logs-console"],["class","log-line",3,"class",4,"ngFor","ngForOf"],["class","empty-msg",4,"ngIf"],[1,"log-line"],[1,"time"],[1,"msg"],[1,"empty-msg"],[1,"debug-section"],[1,"raw-json-pre"],[1,"premium-card","control-card"],[1,"fa-solid","fa-play"],[1,"status-indicator"],[1,"dot"],[1,"control-actions"],["class","btn-control start",3,"disabled","click",4,"ngIf"],["class","btn-control stop",3,"disabled","click",4,"ngIf"],[1,"btn-control","restart",3,"click","disabled"],[1,"btn-control","start",3,"click","disabled"],[1,"btn-control","stop",3,"click","disabled"],[1,"outputs-list-container"],["class","output-url-item",4,"ngFor","ngForOf"],[1,"output-url-item"],[1,"output-url-header"],[1,"url-type-badge"],[1,"url-number"],[1,"output-url-content"],[1,"output-url-text"],["title","Copiar URL",1,"mini-copy-btn",3,"click"],[1,"fa-regular","fa-copy"],[1,"no-outputs-message"],[1,"premium-card","danger-card"],[1,"btn-danger-outline",3,"click"],[1,"fa-solid","fa-trash"]],template:function(e,r){if(e&1){let o=v();n(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),C("click",function(){return m(o),g(r.router.navigate(["/channels"]))}),_(4,"i",7),i(),n(5,"div",8)(6,"h1"),a(7),i(),n(8,"p",9),a(9),i()()(),n(10,"div",10)(11,"button",11),C("click",function(){return m(o),g(r.save())}),_(12,"i",12),a(13),i()()(),f(14,be,6,1,"div",13)(15,Me,6,1,"div",14),n(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18)(20,"h3"),_(21,"i",19),a(22," Informaci\xF3n B\xE1sica"),i()(),n(23,"div",20)(24,"button",21),C("click",function(){return m(o),g(r.basicInfoTab="basic")}),_(25,"i",22),a(26," Configuraci\xF3n "),i(),f(27,Se,3,2,"button",23),i(),n(28,"div",24),f(29,Oe,16,12,"div",25)(30,Ve,4,2,"div",26),i()(),n(31,"div",27)(32,"div",28)(33,"button",21),C("click",function(){return m(o),g(r.activeTab="advanced")}),_(34,"i",29),a(35," Transcodificaci\xF3n "),i(),n(36,"button",21),C("click",function(){return m(o),g(r.activeTab="outputs")}),_(37,"i",30),a(38," Salidas "),i(),f(39,Ae,3,2,"button",23),n(40,"button",21),C("click",function(){return m(o),g(r.activeTab="debug")}),_(41,"i",31),a(42," Super Experto "),i()(),n(43,"div",32),f(44,Ze,8,3,"div",33)(45,st,9,4,"div",34)(46,pt,15,10,"div",35)(47,mt,6,1,"div",36),i()()(),n(48,"div",37),f(49,_t,16,13,"div",38),n(50,"div",17)(51,"div",18)(52,"h3"),_(53,"i",39),a(54," Salidas"),i()(),n(55,"div",24),f(56,Ct,2,1,"div",40)(57,vt,4,0,"ng-template",null,0,J),i()(),f(59,xt,10,0,"div",41),i()()()}if(e&2){let o,c=j(58);s(7),u(r.isNew?"Nuevo Canal":"Editar Canal"),s(2),u(r.isNew?"Crea un nuevo canal para tu servicio OTT":"Modifica la configuraci\xF3n del canal: "+((o=r.channel())==null?null:o.name)),s(2),d("disabled",r.isSaving()||r.currentStatus()==="running"),s(),y("fa-save",!r.isSaving())("fa-spinner",r.isSaving())("fa-spin",r.isSaving()),s(),P(" ",r.isSaving()?"Guardando...":r.isNew?"Crear Canal":r.currentStatus()==="running"?"Bloqueado (En ejecuci\xF3n)":"Guardar Cambios"," "),s(),d("ngIf",r.errorMessage()),s(),d("ngIf",r.successMessage()),s(9),y("active",r.basicInfoTab==="basic"),s(3),d("ngIf",!r.isNew),s(2),d("ngIf",r.basicInfoTab==="basic"),s(),d("ngIf",r.basicInfoTab==="stats"&&!r.isNew),s(3),y("active",r.activeTab==="advanced"),s(3),y("active",r.activeTab==="outputs"),s(3),d("ngIf",!r.isNew),s(),y("active",r.activeTab==="debug"),s(4),d("ngIf",r.activeTab==="advanced"),s(),d("ngIf",r.activeTab==="outputs"),s(),d("ngIf",r.activeTab==="logs"),s(),d("ngIf",r.activeTab==="debug"),s(2),d("ngIf",!r.isNew),s(7),d("ngIf",r.getAllOutputUrls().length>0)("ngIfElse",c),s(3),d("ngIf",!r.isNew)}},dependencies:[ie,$,ee,_e,ge,ue,se,pe,le,me,ce,de,ne,te],styles:[".detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:var(--surface);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;color:var(--text-muted);transition:all .2s}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{color:var(--accent);border-color:var(--accent)}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin-bottom:.25rem}.header-section[_ngcontent-%COMP%]   .title-area[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.95rem}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary.main-save[_ngcontent-%COMP%]{padding:.75rem 2rem;font-weight:700;font-size:1rem;border-radius:12px;background:#475569;color:#fff;display:flex;align-items:center;gap:.75rem;transition:all .2s}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary.main-save[_ngcontent-%COMP%]:hover:not(:disabled){background:#1e293b;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-primary.main-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem;align-items:start}.premium-card[_ngcontent-%COMP%]{background:var(--surface);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow-sm);overflow:hidden;margin-bottom:1.5rem}.premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.25rem 1.75rem;border-bottom:1px solid var(--border);background:#f8fafc80}.premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;display:flex;align-items:center;gap:.75rem;color:#1e293b}.premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent);font-size:.9rem}.premium-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.75rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#475569}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.85rem 1.25rem;border:1px solid #e2e8f0;border-radius:12px;background:#f8fafc;font-size:.95rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);outline:none;background:#fff;box-shadow:0 0 0 3px #6366f11a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.checkbox-row[_ngcontent-%COMP%]{margin-top:.5rem}.checkbox-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-weight:600;font-size:.9rem;color:#1e293b;cursor:pointer;-webkit-user-select:none;user-select:none}.checkbox-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]{display:flex;background:#f1f5f9;padding:.5rem;gap:.5rem}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem;border-radius:10px;background:transparent;font-weight:600;font-size:.9rem;color:#64748b;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:var(--accent);box-shadow:0 2px 8px #0000000d}.config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.active):hover{color:#1e293b;background:#ffffff80}.config-card[_ngcontent-%COMP%]   .tab-content-area[_ngcontent-%COMP%]{padding-top:1.5rem}.basic-tabs[_ngcontent-%COMP%]{display:flex;background:#f1f5f9;padding:.5rem;gap:.5rem;border-bottom:1px solid var(--border)}.basic-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem;border-radius:10px;background:transparent;font-weight:600;font-size:.9rem;color:#64748b;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;border:none;cursor:pointer}.basic-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:var(--accent);box-shadow:0 2px 8px #0000000d}.basic-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.active):hover{color:#1e293b;background:#ffffff80}.stats-view[_ngcontent-%COMP%]{padding-top:1rem}.stats-section[_ngcontent-%COMP%]{margin-bottom:2rem}.stats-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.stats-section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#1e293b;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;padding-bottom:.75rem;border-bottom:2px solid #e2e8f0}.stats-section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.stats-grid[_ngcontent-%COMP%]   .stat-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1e293b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.cpu[_ngcontent-%COMP%]{color:#6366f1}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.memory[_ngcontent-%COMP%]{color:#f59e0b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.net-in[_ngcontent-%COMP%]{color:#22c55e}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.net-out[_ngcontent-%COMP%]{color:#3b82f6}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.running[_ngcontent-%COMP%]{color:#22c55e}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.stopped[_ngcontent-%COMP%]{color:#64748b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.restarting[_ngcontent-%COMP%]{color:#f59e0b}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.error[_ngcontent-%COMP%]{color:#ef4444}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.command[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-size:.8rem;background:#f8fafc;padding:.5rem;border-radius:6px;border:1px solid #e2e8f0;word-break:break-all;font-weight:400;color:#475569}.no-stats-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#94a3b8}.no-stats-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#cbd5e1;display:block}.no-stats-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.5rem;color:#64748b}.no-stats-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.85rem;color:#94a3b8}.section-subheader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:.75rem;border-bottom:1px dashed var(--border)}.section-subheader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem;font-weight:500}.section-subheader[_ngcontent-%COMP%]   .subheader-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.ffmpeg-simple-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}.outputs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.output-item-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;padding:1rem;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0}.output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]{flex:1;display:flex;gap:.75rem}.output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem .85rem;font-size:.9rem;border-radius:8px}.output-item-row[_ngcontent-%COMP%]   .row-fields[_ngcontent-%COMP%]   .full-row[_ngcontent-%COMP%]{flex:1}.output-item-row[_ngcontent-%COMP%]   .btn-icon-danger[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;background:#fef2f2;color:#ef4444;font-weight:700}.output-item-row[_ngcontent-%COMP%]   .btn-icon-danger[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.btn-add-item[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px dashed #e2e8f0;border-radius:12px;background:transparent;color:#64748b;font-weight:600;transition:all .2s}.btn-add-item[_ngcontent-%COMP%]:hover{border-color:var(--accent);color:var(--accent);background:#6366f10d}.json-editor[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .raw-json-pre[_ngcontent-%COMP%]{width:100%;background:#0f172a;color:#38bdf8;font-family:JetBrains Mono,monospace;padding:1rem;border-radius:12px;resize:vertical;border:1px solid #334155;font-size:.85rem;line-height:1.5;margin:0}.raw-json-pre[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;white-space:pre-wrap;word-break:break-all}.json-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;margin-bottom:.5rem;font-style:italic}.outputs-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.output-url-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:1rem;transition:all .2s}.output-url-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.output-url-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.url-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.url-type-badge.hls[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.url-type-badge.udp[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.url-type-badge.dvb[_ngcontent-%COMP%]{background:#e9d5ff;color:#6b21a8}.url-type-badge.file[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.url-number[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);font-weight:600}.output-url-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.output-url-text[_ngcontent-%COMP%]{flex:1;font-family:JetBrains Mono,monospace;font-size:.85rem;color:#1e293b;background:#fff;padding:.75rem 1rem;border-radius:8px;border:1px solid #e2e8f0;word-break:break-all;line-height:1.5}.mini-copy-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:.5rem .75rem;border-radius:8px;color:#64748b;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.mini-copy-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;color:#1e293b}.no-outputs-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1.5rem;background:#f8fafc;border:1px dashed #e2e8f0;border-radius:12px;color:var(--text-muted);font-size:.9rem}.no-outputs-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#94a3b8}.options-container[_ngcontent-%COMP%]{background:#f8fafc;padding:1rem;border-radius:12px;border:1px solid #e2e8f0;margin-top:.5rem}.options-container[_ngcontent-%COMP%]   .options-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.options-container[_ngcontent-%COMP%]   .options-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;color:#475569}.options-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.options-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.options-container[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;font-size:.85rem}.options-container[_ngcontent-%COMP%]   .btn-add-mini[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .75rem;background:#f1f5f9;color:#475569;font-weight:600;border:1px solid #cbd5e1}.options-container[_ngcontent-%COMP%]   .btn-add-mini[_ngcontent-%COMP%]:hover{background:#e2e8f0}.options-container[_ngcontent-%COMP%]   .btn-remove-mini[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#fee2e2;color:#ef4444;display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:700}.options-container[_ngcontent-%COMP%]   .btn-remove-mini[_ngcontent-%COMP%]:hover{background:#fecaca}.dark[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151}.dark[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .btn-add-mini[_ngcontent-%COMP%]{background:#374151;color:#fff;border-color:#4b5563}.dark[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .btn-remove-mini[_ngcontent-%COMP%]{background:#450a0a;color:#f87171}.danger-card[_ngcontent-%COMP%]{border-color:#fecaca}.danger-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#fef2f2}.danger-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#991b1b}.danger-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc2626}.danger-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#991b1b;margin-bottom:1.25rem}.danger-card[_ngcontent-%COMP%]   .btn-danger-outline[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#fff;color:#dc2626;border:1px solid #dc2626;border-radius:10px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:.5rem}.danger-card[_ngcontent-%COMP%]   .btn-danger-outline[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.control-card[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem;font-weight:700;padding:.75rem 1rem;background:#f1f5f9;border-radius:12px}.control-card[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#94a3b8}.control-card[_ngcontent-%COMP%]   .status-indicator.running[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.control-card[_ngcontent-%COMP%]   .status-indicator.running[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 8px #10b981;animation:_ngcontent-%COMP%_pulse 2s infinite}.control-card[_ngcontent-%COMP%]   .status-indicator.error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.control-card[_ngcontent-%COMP%]   .status-indicator.error[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#ef4444;box-shadow:0 0 8px #ef4444}.control-card[_ngcontent-%COMP%]   .status-indicator.restarting[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.control-card[_ngcontent-%COMP%]   .status-indicator.restarting[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#f59e0b;box-shadow:0 0 8px #f59e0b;animation:_ngcontent-%COMP%_pulse 2s infinite}.control-card[_ngcontent-%COMP%]   .control-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.75rem}.control-card[_ngcontent-%COMP%]   .btn-control[_ngcontent-%COMP%]{padding:.75rem;border-radius:10px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:.6rem;transition:all .2s}.control-card[_ngcontent-%COMP%]   .btn-control.start[_ngcontent-%COMP%]{background:#10b981;color:#fff}.control-card[_ngcontent-%COMP%]   .btn-control.start[_ngcontent-%COMP%]:hover{background:#059669}.control-card[_ngcontent-%COMP%]   .btn-control.stop[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.control-card[_ngcontent-%COMP%]   .btn-control.stop[_ngcontent-%COMP%]:hover{background:#dc2626}.control-card[_ngcontent-%COMP%]   .btn-control.restart[_ngcontent-%COMP%]{background:#6366f1;color:#fff}.control-card[_ngcontent-%COMP%]   .btn-control.restart[_ngcontent-%COMP%]:hover{background:#4f46e5}.control-card[_ngcontent-%COMP%]   .btn-control[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.95);opacity:.8}50%{transform:scale(1.05);opacity:1}to{transform:scale(.95);opacity:.8}}.logs-console[_ngcontent-%COMP%]{background:#0f172a;padding:1rem;border-radius:12px;height:350px;overflow-y:auto;font-family:JetBrains Mono,monospace;font-size:.8rem}.logs-console[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{margin-bottom:.25rem}.logs-console[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#64748b;margin-right:.75rem}.logs-console[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#e2e8f0}.logs-console[_ngcontent-%COMP%]   .log-line.error[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#f87171}.logs-console[_ngcontent-%COMP%]   .log-line.warning[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#fbbf24}.logs-console[_ngcontent-%COMP%]   .empty-msg[_ngcontent-%COMP%]{color:#475569;text-align:center;margin-top:2rem;font-style:italic}.btn-outline-small[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:.4rem .85rem;font-size:.75rem;font-weight:700;border-radius:8px;color:#64748b;display:flex;align-items:center;gap:.5rem}.btn-outline-small[_ngcontent-%COMP%]:hover{border-color:var(--accent);color:var(--accent)}.btn-outline-small.btn-danger-subtle[_ngcontent-%COMP%]:hover{border-color:#ef4444;color:#ef4444;background:#fef2f2}.btn-outline-small[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dark[_ngcontent-%COMP%]   .premium-card[_ngcontent-%COMP%]{background:#111827;border-color:#1f2937}.dark[_ngcontent-%COMP%]   .premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#1f293780}.dark[_ngcontent-%COMP%]   .premium-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f3f4f6}.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#94a3b8}.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .output-url-item[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151}.dark[_ngcontent-%COMP%]   .output-url-item[_ngcontent-%COMP%]:hover{background:#374151}.dark[_ngcontent-%COMP%]   .output-url-text[_ngcontent-%COMP%]{background:#0f172a;color:#e2e8f0;border-color:#374151}.dark[_ngcontent-%COMP%]   .mini-copy-btn[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#94a3b8}.dark[_ngcontent-%COMP%]   .mini-copy-btn[_ngcontent-%COMP%]:hover{background:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .no-outputs-message[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#94a3b8}.dark[_ngcontent-%COMP%]   .config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]{background:#1f2937}.dark[_ngcontent-%COMP%]   .config-card[_ngcontent-%COMP%]   .card-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .basic-tabs[_ngcontent-%COMP%]{background:#1f2937}.dark[_ngcontent-%COMP%]   .basic-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#374151;color:#fff}.dark[_ngcontent-%COMP%]   .output-item-row[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151}.dark[_ngcontent-%COMP%]   .stats-section-title[_ngcontent-%COMP%]{color:#f3f4f6;border-bottom-color:#374151}.dark[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#e2e8f0}.dark[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value.command[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;color:#94a3b8}.dark[_ngcontent-%COMP%]   .no-stats-message[_ngcontent-%COMP%]{color:#94a3b8}.has-error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .has-error[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .has-error[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-color:#ef4444!important;background:#fef2f2!important}.has-error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ef4444!important}.has-error[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#ef4444;font-size:.75rem;font-weight:600;margin-top:.25rem;display:block}.audio-track-selector[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.audio-track-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]{padding:.6rem 1rem;background:#6366f1;color:#fff;border:none;border-radius:8px;font-weight:600;font-size:.85rem;display:flex;align-items:center;justify-content:center;gap:.5rem;cursor:pointer;transition:all .2s;white-space:nowrap}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1em;text-align:center;display:inline-flex;align-items:center;justify-content:center}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]:hover:not(:disabled){background:#4f46e5;transform:translateY(-1px)}.audio-track-selector[_ngcontent-%COMP%]   .btn-analyze-audio[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.field-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.75rem;color:#64748b;font-style:italic}.alert[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:12px;margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem;font-weight:600;position:relative;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.alert.alert-danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.alert.alert-success[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0}.alert[_ngcontent-%COMP%]   .close-alert[_ngcontent-%COMP%]{position:absolute;right:1rem;background:transparent;border:none;font-size:1.25rem;color:inherit;cursor:pointer;opacity:.5}.alert[_ngcontent-%COMP%]   .close-alert[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-10px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};export{xe as ChannelDetailComponent};
