import{j as Q,k as X}from"./chunk-DHZXEKVC.js";import{b as Z,c as $,d as ee,e as te,f as ne,g as oe,l as ie,m as re,n as ae}from"./chunk-XBSJZZ3D.js";import{$ as M,Aa as G,Ba as K,C as a,Ca as J,Ea as v,F as g,G as f,K as u,O as m,P as o,Q as i,R as c,S as U,T as d,U as b,X as I,Y,Z as l,_ as h,aa as H,ca as z,da as N,ea as R,m as V,pa as x,q as _,r as O,s as S,sa as y,ta as W,va as B,w,wa as q,ya as E,za as P}from"./chunk-DLZENSHA.js";var le=(e,n)=>{let t=_(v).getToken();if(t){let s=e.clone({setHeaders:{Authorization:`Bearer ${t}`}});return n(s)}return n(e)};var C=class e{THEME_KEY="atlas-theme";isDarkMode=w(this.getInitialTheme());constructor(){this.applyTheme(this.isDarkMode())}toggleTheme(){this.isDarkMode.update(n=>!n),this.applyTheme(this.isDarkMode()),localStorage.setItem(this.THEME_KEY,this.isDarkMode()?"dark":"light")}applyTheme(n){n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}getInitialTheme(){let n=localStorage.getItem(this.THEME_KEY);return n?n==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}static \u0275fac=function(r){return new(r||e)};static \u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"})};function fe(e,n){if(e&1&&(o(0,"div",13),l(1),i()),e&2){let r=b();a(),M(" ",r.errorMessage()," ")}}var D=class e{constructor(n,r,t){this.authService=n;this.themeService=r;this.router=t}username="";password="";isLoading=w(!1);errorMessage=w("");onSubmit(){!this.username||!this.password||(this.isLoading.set(!0),this.errorMessage.set(""),this.authService.login({username:this.username,password:this.password}).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:n=>{this.isLoading.set(!1),this.errorMessage.set(n.error?.message||"Error al iniciar sesi\xF3n. Int\xE9ntalo de nuevo.")}}))}static \u0275fac=function(r){return new(r||e)(g(v),g(C),g(P))};static \u0275cmp=f({type:e,selectors:[["app-login"]],decls:26,vars:7,consts:[[1,"login-container"],[1,"login-card","glass"],[1,"logo"],[1,"atlas-text"],[1,"media-text"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","username","placeholder","atlas","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"theme-toggle"],[1,"btn-ghost",3,"click"],[1,"error-msg"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l(4,"ATLAS"),i(),o(5,"span",4),l(6,"MEDIA SERVER"),i()(),o(7,"h2"),l(8,"Bienvenido"),i(),o(9,"p"),l(10,"Ingresa tus credenciales para continuar"),i(),o(11,"form",5),d("ngSubmit",function(){return t.onSubmit()}),o(12,"div",6)(13,"label"),l(14,"Usuario"),i(),o(15,"input",7),R("ngModelChange",function(p){return N(t.username,p)||(t.username=p),p}),i()(),o(16,"div",6)(17,"label"),l(18,"Contrase\xF1a"),i(),o(19,"input",8),R("ngModelChange",function(p){return N(t.password,p)||(t.password=p),p}),i()(),o(20,"button",9),l(21),i(),u(22,fe,2,1,"div",10),i(),o(23,"div",11)(24,"button",12),d("click",function(){return t.themeService.toggleTheme()}),l(25),i()()()()),r&2&&(a(15),z("ngModel",t.username),a(4),z("ngModel",t.password),a(),m("disabled",t.isLoading()),a(),M(" ",t.isLoading()?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "),a(),m("ngIf",t.errorMessage()),a(3),H(" ",t.themeService.isDarkMode()?"\u{1F319}":"\u2600\uFE0F"," Modo ",t.themeService.isDarkMode()?"Oscuro":"Claro"," "))},dependencies:[y,x,re,oe,Z,$,ee,ie,ne,te],styles:[".login-container[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at top right,var(--primary),transparent 40%),radial-gradient(circle at bottom left,var(--info),transparent 40%)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2.5rem;border-radius:24px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.logo[_ngcontent-%COMP%]{margin-bottom:2rem;display:flex;flex-direction:column;line-height:1}.atlas-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;letter-spacing:-1px;background:linear-gradient(to right,var(--primary),var(--info));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.media-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;letter-spacing:4px;margin-top:.5rem}h2[_ngcontent-%COMP%]{margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]{text-align:left;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.85rem;margin-bottom:.5rem;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border-radius:12px;border:1px solid var(--border);background:var(--surface);color:var(--text);font-size:1rem;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px #6366f11a}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.85rem;font-weight:600;margin-top:1rem;font-size:1rem}.error-msg[_ngcontent-%COMP%]{margin-top:1rem;color:var(--danger);font-size:.85rem;background:#ef44441a;padding:.75rem;border-radius:8px}.theme-toggle[_ngcontent-%COMP%]{margin-top:2rem}.theme-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;color:var(--text-muted);font-size:.85rem}.theme-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--text)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};function he(e,n){if(e&1){let r=U();o(0,"div",1),d("click",function(){O(r);let s=b();return S(s.dialog.close(!1))}),o(1,"div",2),d("click",function(s){return O(r),S(s.stopPropagation())}),o(2,"div",3)(3,"h3"),l(4),i()(),o(5,"div",4)(6,"p"),l(7),i()(),o(8,"div",5)(9,"button",6),d("click",function(){O(r);let s=b();return S(s.dialog.close(!1))}),l(10),i(),o(11,"button",7),d("click",function(){O(r);let s=b();return S(s.dialog.close(!0))}),l(12),i()()()()}if(e&2){let r=n.ngIf;a(4),h(r.config.title),a(3),h(r.config.message),a(3),M(" ",r.config.cancelText," "),a(),Y("btn-"+r.config.type),a(),M(" ",r.config.confirmText," ")}}var L=class e{constructor(n){this.dialog=n}static \u0275fac=function(r){return new(r||e)(g(ae))};static \u0275cmp=f({type:e,selectors:[["app-confirm-dialog"]],decls:1,vars:1,consts:[["class","dialog-overlay",3,"click",4,"ngIf"],[1,"dialog-overlay",3,"click"],[1,"dialog-box","glass",3,"click"],[1,"dialog-header"],[1,"dialog-body"],[1,"dialog-footer"],[1,"btn-cancel",3,"click"],[3,"click"]],template:function(r,t){r&1&&u(0,he,13,6,"div",0),r&2&&m("ngIf",t.dialog.state())},dependencies:[y,x],styles:[".dialog-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0006;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease}.dialog-box[_ngcontent-%COMP%]{width:90%;max-width:400px;padding:2rem;border-radius:20px;display:flex;flex-direction:column;gap:1.5rem;box-shadow:0 20px 40px #0003;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.34,1.56,.64,1)}.dialog-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:var(--text)}.dialog-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);line-height:1.5}.dialog-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:.5rem}button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:12px;font-weight:600;font-size:.9rem;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]{background:var(--surface);color:var(--text-muted)}.btn-cancel[_ngcontent-%COMP%]:hover{background:var(--border);color:var(--text)}.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.1);transform:translateY(-1px)}.btn-danger[_ngcontent-%COMP%]{background:var(--danger);color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{filter:brightness(1.1);transform:translateY(-1px)}.btn-warning[_ngcontent-%COMP%]{background:var(--warning);color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{filter:brightness(1.1);transform:translateY(-1px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};function ve(e,n){e&1&&c(0,"img",38)}function Ce(e,n){e&1&&c(0,"img",39)}function _e(e,n){e&1&&(o(0,"span",40),l(1,"Dashboard"),i())}function be(e,n){e&1&&(o(0,"span",40),l(1,"Canales"),i())}function Me(e,n){e&1&&(o(0,"span",40),l(1,"Usuarios"),i())}function xe(e,n){e&1&&(o(0,"span"),l(1,"Colapsar"),i())}var A=class e{constructor(n,r,t){this.authService=n;this.themeService=r;this.router=t}isSidebarCollapsed=!1;toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}getPageTitle(){let n=this.router.url;return n.includes("dashboard")?"Dashboard":n.includes("channels/new")?"Nuevo Canal":n.includes("channels/")?"Detalles del Canal":n.includes("channels")?"Canales":n.includes("users")?"Usuarios":n.includes("settings")?"Configuraci\xF3n":"Panel de Control"}static \u0275fac=function(r){return new(r||e)(g(v),g(C),g(P))};static \u0275cmp=f({type:e,selectors:[["app-main-layout"]],decls:49,vars:20,consts:[[1,"layout-wrapper"],[1,"sidebar"],[1,"sidebar-header"],[1,"logo"],["src","/atlas_logo.svg","alt","Atlas Logo","class","logo-img logo-full",4,"ngIf"],["src","/atlas_isot.svg","alt","Atlas","class","logo-img logo-icon",4,"ngIf"],[1,"sidebar-nav"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-item"],[1,"fa-solid","fa-chart-line","icon"],["class","label",4,"ngIf"],["routerLink","/channels","routerLinkActive","active",1,"nav-item"],[1,"fa-solid","fa-satellite-dish","icon"],["routerLink","/users","routerLinkActive","active",1,"nav-item"],[1,"fa-solid","fa-users","icon"],[1,"sidebar-footer"],[1,"collapse-btn",3,"click"],[1,"fa-solid","icon"],[4,"ngIf"],[1,"main-content"],[1,"topbar"],[1,"topbar-left"],[1,"breadcrumbs"],[1,"muted"],[1,"separator"],[1,"current"],[1,"topbar-right"],[1,"icon-btn",3,"click"],[1,"fa-solid"],["title","Cerrar Sesi\xF3n",1,"icon-btn","logout",3,"click"],[1,"fa-solid","fa-power-off"],[1,"user-profile"],[1,"user-info"],[1,"user-name"],[1,"user-role"],[1,"avatar-wrapper"],[1,"avatar"],[1,"chevron"],[1,"content-view"],["src","/atlas_logo.svg","alt","Atlas Logo",1,"logo-img","logo-full"],["src","/atlas_isot.svg","alt","Atlas",1,"logo-img","logo-icon"],[1,"label"]],template:function(r,t){if(r&1&&(o(0,"div",0)(1,"aside",1)(2,"div",2)(3,"div",3),u(4,ve,1,0,"img",4)(5,Ce,1,0,"img",5),i()(),o(6,"nav",6)(7,"a",7),c(8,"i",8),u(9,_e,2,0,"span",9),i(),o(10,"a",10),c(11,"i",11),u(12,be,2,0,"span",9),i(),o(13,"a",12),c(14,"i",13),u(15,Me,2,0,"span",9),i()(),o(16,"div",14)(17,"button",15),d("click",function(){return t.toggleSidebar()}),c(18,"i",16),u(19,xe,2,0,"span",17),i()()(),o(20,"main",18)(21,"header",19)(22,"div",20)(23,"div",21)(24,"span",22),l(25,"Atlas"),i(),o(26,"span",23),l(27,"/"),i(),o(28,"span",24),l(29),i()()(),o(30,"div",25)(31,"button",26),d("click",function(){return t.themeService.toggleTheme()}),c(32,"i",27),i(),o(33,"button",28),d("click",function(){return t.authService.logout()}),c(34,"i",29),i(),o(35,"div",30)(36,"div",31)(37,"span",32),l(38),i(),o(39,"span",33),l(40),i()(),o(41,"div",34)(42,"div",35),l(43),i(),o(44,"span",36),l(45,"\u25BE"),i()()()()(),o(46,"div",37),c(47,"router-outlet"),i()(),c(48,"app-confirm-dialog"),i()),r&2){let s,p,k;a(),I("collapsed",t.isSidebarCollapsed),a(3),m("ngIf",!t.isSidebarCollapsed),a(),m("ngIf",t.isSidebarCollapsed),a(4),m("ngIf",!t.isSidebarCollapsed),a(3),m("ngIf",!t.isSidebarCollapsed),a(3),m("ngIf",!t.isSidebarCollapsed),a(3),I("fa-angles-left",!t.isSidebarCollapsed)("fa-angles-right",t.isSidebarCollapsed),a(),m("ngIf",!t.isSidebarCollapsed),a(10),h(t.getPageTitle()),a(3),I("fa-moon",!t.themeService.isDarkMode())("fa-sun",t.themeService.isDarkMode()),a(6),h((s=t.authService.currentUser())==null?null:s.username),a(2),h(((p=t.authService.currentUser())==null?null:p.role)||"Admin"),a(3),h((k=t.authService.currentUser())==null||k.username==null||k.username[0]==null?null:k.username[0].toUpperCase())}},dependencies:[y,x,E,G,K,L],styles:[".layout-wrapper[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:260px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:width .3s ease;z-index:100}.sidebar.collapsed[_ngcontent-%COMP%]{width:80px}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border)}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;font-weight:700;color:var(--primary);padding-left:.5rem;width:100%}.logo[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:auto;max-width:100%;transition:opacity .3s ease;object-fit:contain}.logo[_ngcontent-%COMP%]   .logo-img.logo-full[_ngcontent-%COMP%]{height:35px;width:auto;max-width:140px}.logo[_ngcontent-%COMP%]   .logo-img.logo-icon[_ngcontent-%COMP%]{height:35px;width:auto;max-width:50px}.sidebar.collapsed[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:0;justify-content:center}.dark[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{filter:brightness(1.3) contrast(1.1)}.collapse-btn[_ngcontent-%COMP%]{background:transparent;color:var(--text-muted);font-size:1rem;display:flex;align-items:center;gap:.5rem}.collapse-btn[_ngcontent-%COMP%]:hover{color:var(--text)}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 1rem;display:flex;flex-direction:column;gap:.25rem}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.85rem 1.25rem;color:#64748b;text-decoration:none;border-radius:12px;transition:all .2s ease;font-weight:500;font-size:.95rem}.nav-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1.25rem;font-size:1.1rem;display:flex;align-items:center;justify-content:center;opacity:.7}.nav-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.nav-item.active[_ngcontent-%COMP%]{background:#f1f5f9;color:#0f172a;font-weight:600}.nav-item.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:1}.dark[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover, .dark[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background:#1e293b;color:#fff}.sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid var(--border)}.btn-logout[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:.75rem;background:transparent;color:var(--danger);font-weight:500}.btn-logout[_ngcontent-%COMP%]:hover{background:#ef44441a}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;background:var(--bg)}.topbar[_ngcontent-%COMP%]{height:70px;display:flex;align-items:center;justify-content:space-between;padding:0 2rem;background:var(--surface);border-bottom:1px solid var(--border)}.breadcrumbs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;font-weight:500}.breadcrumbs[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{color:var(--text-muted)}.breadcrumbs[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{color:var(--text);font-weight:600}.breadcrumbs[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#cbd5e1}.topbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.icon-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:var(--text-muted);border-radius:8px;position:relative}.icon-btn[_ngcontent-%COMP%]:hover{background:var(--bg);color:var(--text)}.icon-btn.logout[_ngcontent-%COMP%]{color:var(--danger)}.icon-btn.logout[_ngcontent-%COMP%]:hover{background:#ef44441a}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding-left:.5rem;cursor:pointer}.user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;line-height:1.2}.user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);font-weight:500}.user-profile[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.user-profile[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffedd5;color:#ea580c;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem}.user-profile[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.8rem}.content-view[_ngcontent-%COMP%]{flex:1;padding:2.5rem 3rem;overflow-y:auto;max-width:1600px;width:100%;margin:0 auto}"]})};var me=(e,n)=>{let r=_(v),t=_(P);return r.isAuthenticated()?!0:(t.navigate(["/auth/login"]),!1)};var de=[{path:"auth/login",component:D},{path:"",component:A,canActivate:[me],children:[{path:"dashboard",loadComponent:()=>import("./chunk-54YIDGEW.js").then(e=>e.DashboardComponent)},{path:"channels",loadComponent:()=>import("./chunk-UIKLRR47.js").then(e=>e.ChannelListComponent)},{path:"channels/:id",loadComponent:()=>import("./chunk-JSZOQ6R5.js").then(e=>e.ChannelDetailComponent)},{path:"users",loadComponent:()=>import("./chunk-R4G3UL3T.js").then(e=>e.UserListComponent)},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"**",redirectTo:"dashboard"}];var pe={providers:[J(de),B(q([le])),X(Q())]};var j=class e{themeService=_(C);static \u0275fac=function(r){return new(r||e)};static \u0275cmp=f({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,t){r&1&&c(0,"router-outlet")},dependencies:[E],encapsulation:2})};W(j,pe).catch(e=>console.error(e));
